{"remainingRequest":"/Users/wusaisai/Desktop/jd/node_modules/babel-loader/lib/index.js!/Users/wusaisai/Desktop/jd/node_modules/eslint-loader/index.js??ref--13-0!/Users/wusaisai/Desktop/jd/src/assets/js/libs/iscroll.js","dependencies":[{"path":"/Users/wusaisai/Desktop/jd/src/assets/js/libs/iscroll.js","mtime":1594624307068},{"path":"/Users/wusaisai/Desktop/jd/node_modules/cache-loader/dist/cjs.js","mtime":1582343728286},{"path":"/Users/wusaisai/Desktop/jd/node_modules/babel-loader/lib/index.js","mtime":1585552045769},{"path":"/Users/wusaisai/Desktop/jd/node_modules/eslint-loader/index.js","mtime":1582272560345}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiKTsKCnZhciBfdHlwZW9mID0gcmVxdWlyZSgiL1VzZXJzL3d1c2Fpc2FpL0Rlc2t0b3AvamQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIik7CgovKiEgaVNjcm9sbCB2NS4xLjIgfiAoYykgMjAwOC0yMDE0IE1hdHRlbyBTcGluZWxsaSB+IGh0dHA6Ly9jdWJpcS5vcmcvbGljZW5zZSAqLwooZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsIE1hdGgpIHsKICB2YXIgckFGID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7CiAgfTsKCiAgdmFyIHV0aWxzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG1lID0ge307CiAgICB2YXIgX2VsZW1lbnRTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlOwoKICAgIHZhciBfdmVuZG9yID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdmVuZG9ycyA9IFsndCcsICd3ZWJraXRUJywgJ01velQnLCAnbXNUJywgJ09UJ10sCiAgICAgICAgICB0cmFuc2Zvcm0sCiAgICAgICAgICBpID0gMCwKICAgICAgICAgIGwgPSB2ZW5kb3JzLmxlbmd0aDsKCiAgICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgdHJhbnNmb3JtID0gdmVuZG9yc1tpXSArICdyYW5zZm9ybSc7CiAgICAgICAgaWYgKHRyYW5zZm9ybSBpbiBfZWxlbWVudFN0eWxlKSByZXR1cm4gdmVuZG9yc1tpXS5zdWJzdHIoMCwgdmVuZG9yc1tpXS5sZW5ndGggLSAxKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSgpOwoKICAgIGZ1bmN0aW9uIF9wcmVmaXhTdHlsZShzdHlsZSkgewogICAgICBpZiAoX3ZlbmRvciA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTsKICAgICAgaWYgKF92ZW5kb3IgPT09ICcnKSByZXR1cm4gc3R5bGU7CiAgICAgIHJldHVybiBfdmVuZG9yICsgc3R5bGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHlsZS5zdWJzdHIoMSk7CiAgICB9CgogICAgbWUuZ2V0VGltZSA9IERhdGUubm93IHx8IGZ1bmN0aW9uIGdldFRpbWUoKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgIH07CgogICAgbWUuZXh0ZW5kID0gZnVuY3Rpb24gKHRhcmdldCwgb2JqKSB7CiAgICAgIGZvciAodmFyIGkgaW4gb2JqKSB7CiAgICAgICAgdGFyZ2V0W2ldID0gb2JqW2ldOwogICAgICB9CiAgICB9OwoKICAgIG1lLmFkZEV2ZW50ID0gZnVuY3Rpb24gKGVsLCB0eXBlLCBmbiwgY2FwdHVyZSkgewogICAgICBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCAhIWNhcHR1cmUpOwogICAgfTsKCiAgICBtZS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uIChlbCwgdHlwZSwgZm4sIGNhcHR1cmUpIHsKICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgISFjYXB0dXJlKTsKICAgIH07CgogICAgbWUucHJlZml4UG9pbnRlckV2ZW50ID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkgewogICAgICByZXR1cm4gd2luZG93Lk1TUG9pbnRlckV2ZW50ID8gJ01TUG9pbnRlcicgKyBwb2ludGVyRXZlbnQuY2hhckF0KDkpLnRvVXBwZXJDYXNlKCkgKyBwb2ludGVyRXZlbnQuc3Vic3RyKDEwKSA6IHBvaW50ZXJFdmVudDsKICAgIH07CgogICAgbWUubW9tZW50dW0gPSBmdW5jdGlvbiAoY3VycmVudCwgc3RhcnQsIHRpbWUsIGxvd2VyTWFyZ2luLCB3cmFwcGVyU2l6ZSwgZGVjZWxlcmF0aW9uKSB7CiAgICAgIHZhciBkaXN0YW5jZSA9IGN1cnJlbnQgLSBzdGFydCwKICAgICAgICAgIHNwZWVkID0gTWF0aC5hYnMoZGlzdGFuY2UpIC8gdGltZSwKICAgICAgICAgIGRlc3RpbmF0aW9uLAogICAgICAgICAgZHVyYXRpb247CiAgICAgIGRlY2VsZXJhdGlvbiA9IGRlY2VsZXJhdGlvbiA9PT0gdW5kZWZpbmVkID8gMC4wMDA2IDogZGVjZWxlcmF0aW9uOwogICAgICBkZXN0aW5hdGlvbiA9IGN1cnJlbnQgKyBzcGVlZCAqIHNwZWVkIC8gKDIgKiBkZWNlbGVyYXRpb24pICogKGRpc3RhbmNlIDwgMCA/IC0xIDogMSk7CiAgICAgIGR1cmF0aW9uID0gc3BlZWQgLyBkZWNlbGVyYXRpb247CgogICAgICBpZiAoZGVzdGluYXRpb24gPCBsb3dlck1hcmdpbikgewogICAgICAgIGRlc3RpbmF0aW9uID0gd3JhcHBlclNpemUgPyBsb3dlck1hcmdpbiAtIHdyYXBwZXJTaXplIC8gMi41ICogKHNwZWVkIC8gOCkgOiBsb3dlck1hcmdpbjsKICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGRlc3RpbmF0aW9uIC0gY3VycmVudCk7CiAgICAgICAgZHVyYXRpb24gPSBkaXN0YW5jZSAvIHNwZWVkOwogICAgICB9IGVsc2UgaWYgKGRlc3RpbmF0aW9uID4gMCkgewogICAgICAgIGRlc3RpbmF0aW9uID0gd3JhcHBlclNpemUgPyB3cmFwcGVyU2l6ZSAvIDIuNSAqIChzcGVlZCAvIDgpIDogMDsKICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGN1cnJlbnQpICsgZGVzdGluYXRpb247CiAgICAgICAgZHVyYXRpb24gPSBkaXN0YW5jZSAvIHNwZWVkOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGRlc3RpbmF0aW9uOiBNYXRoLnJvdW5kKGRlc3RpbmF0aW9uKSwKICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24KICAgICAgfTsKICAgIH07CgogICAgdmFyIF90cmFuc2Zvcm0gPSBfcHJlZml4U3R5bGUoJ3RyYW5zZm9ybScpOwoKICAgIG1lLmV4dGVuZChtZSwgewogICAgICBoYXNUcmFuc2Zvcm06IF90cmFuc2Zvcm0gIT09IGZhbHNlLAogICAgICBoYXNQZXJzcGVjdGl2ZTogX3ByZWZpeFN0eWxlKCdwZXJzcGVjdGl2ZScpIGluIF9lbGVtZW50U3R5bGUsCiAgICAgIGhhc1RvdWNoOiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3csCiAgICAgIGhhc1BvaW50ZXI6IHdpbmRvdy5Qb2ludGVyRXZlbnQgfHwgd2luZG93Lk1TUG9pbnRlckV2ZW50LAogICAgICAvLyBJRTEwIGlzIHByZWZpeGVkCiAgICAgIGhhc1RyYW5zaXRpb246IF9wcmVmaXhTdHlsZSgndHJhbnNpdGlvbicpIGluIF9lbGVtZW50U3R5bGUKICAgIH0pOyAvLyBUaGlzIHNob3VsZCBmaW5kIGFsbCBBbmRyb2lkIGJyb3dzZXJzIGxvd2VyIHRoYW4gYnVpbGQgNTM1LjE5IChib3RoIHN0b2NrIGJyb3dzZXIgYW5kIHdlYnZpZXcpCgogICAgbWUuaXNCYWRBbmRyb2lkID0gL0FuZHJvaWQgLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbikgJiYgIS9DaHJvbWVcL1xkLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbik7CiAgICBtZS5leHRlbmQobWUuc3R5bGUgPSB7fSwgewogICAgICB0cmFuc2Zvcm06IF90cmFuc2Zvcm0sCiAgICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogX3ByZWZpeFN0eWxlKCd0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24nKSwKICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiBfcHJlZml4U3R5bGUoJ3RyYW5zaXRpb25EdXJhdGlvbicpLAogICAgICB0cmFuc2l0aW9uRGVsYXk6IF9wcmVmaXhTdHlsZSgndHJhbnNpdGlvbkRlbGF5JyksCiAgICAgIHRyYW5zZm9ybU9yaWdpbjogX3ByZWZpeFN0eWxlKCd0cmFuc2Zvcm1PcmlnaW4nKQogICAgfSk7CgogICAgbWUuaGFzQ2xhc3MgPSBmdW5jdGlvbiAoZSwgYykgewogICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCIoXnxcXHMpIiArIGMgKyAiKFxcc3wkKSIpOwogICAgICByZXR1cm4gcmUudGVzdChlLmNsYXNzTmFtZSk7CiAgICB9OwoKICAgIG1lLmFkZENsYXNzID0gZnVuY3Rpb24gKGUsIGMpIHsKICAgICAgaWYgKG1lLmhhc0NsYXNzKGUsIGMpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbmV3Y2xhc3MgPSBlLmNsYXNzTmFtZS5zcGxpdCgnICcpOwogICAgICBuZXdjbGFzcy5wdXNoKGMpOwogICAgICBlLmNsYXNzTmFtZSA9IG5ld2NsYXNzLmpvaW4oJyAnKTsKICAgIH07CgogICAgbWUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoZSwgYykgewogICAgICBpZiAoIW1lLmhhc0NsYXNzKGUsIGMpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCIoXnxcXHMpIiArIGMgKyAiKFxcc3wkKSIsICdnJyk7CiAgICAgIGUuY2xhc3NOYW1lID0gZS5jbGFzc05hbWUucmVwbGFjZShyZSwgJyAnKTsKICAgIH07CgogICAgbWUub2Zmc2V0ID0gZnVuY3Rpb24gKGVsKSB7CiAgICAgIHZhciBsZWZ0ID0gLWVsLm9mZnNldExlZnQsCiAgICAgICAgICB0b3AgPSAtZWwub2Zmc2V0VG9wOyAvLyBqc2hpbnQgLVcwODQKCiAgICAgIHdoaWxlIChlbCA9IGVsLm9mZnNldFBhcmVudCkgewogICAgICAgIGxlZnQgLT0gZWwub2Zmc2V0TGVmdDsKICAgICAgICB0b3AgLT0gZWwub2Zmc2V0VG9wOwogICAgICB9IC8vIGpzaGludCArVzA4NAoKCiAgICAgIHJldHVybiB7CiAgICAgICAgbGVmdDogbGVmdCwKICAgICAgICB0b3A6IHRvcAogICAgICB9OwogICAgfTsKCiAgICBtZS5wcmV2ZW50RGVmYXVsdEV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChlbCwgZXhjZXB0aW9ucykgewogICAgICBmb3IgKHZhciBpIGluIGV4Y2VwdGlvbnMpIHsKICAgICAgICBpZiAoZXhjZXB0aW9uc1tpXS50ZXN0KGVsW2ldKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIG1lLmV4dGVuZChtZS5ldmVudFR5cGUgPSB7fSwgewogICAgICB0b3VjaHN0YXJ0OiAxLAogICAgICB0b3VjaG1vdmU6IDEsCiAgICAgIHRvdWNoZW5kOiAxLAogICAgICBtb3VzZWRvd246IDIsCiAgICAgIG1vdXNlbW92ZTogMiwKICAgICAgbW91c2V1cDogMiwKICAgICAgcG9pbnRlcmRvd246IDMsCiAgICAgIHBvaW50ZXJtb3ZlOiAzLAogICAgICBwb2ludGVydXA6IDMsCiAgICAgIE1TUG9pbnRlckRvd246IDMsCiAgICAgIE1TUG9pbnRlck1vdmU6IDMsCiAgICAgIE1TUG9pbnRlclVwOiAzCiAgICB9KTsKICAgIG1lLmV4dGVuZChtZS5lYXNlID0ge30sIHsKICAgICAgcXVhZHJhdGljOiB7CiAgICAgICAgc3R5bGU6ICdjdWJpYy1iZXppZXIoMC4yNSwgMC40NiwgMC40NSwgMC45NCknLAogICAgICAgIGZuOiBmdW5jdGlvbiBmbihrKSB7CiAgICAgICAgICByZXR1cm4gayAqICgyIC0gayk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjaXJjdWxhcjogewogICAgICAgIHN0eWxlOiAnY3ViaWMtYmV6aWVyKDAuMSwgMC41NywgMC4xLCAxKScsCiAgICAgICAgLy8gTm90IHByb3Blcmx5ICJjaXJjdWxhciIgYnV0IHRoaXMgbG9va3MgYmV0dGVyLCBpdCBzaG91bGQgYmUgKDAuMDc1LCAwLjgyLCAwLjE2NSwgMSkKICAgICAgICBmbjogZnVuY3Rpb24gZm4oaykgewogICAgICAgICAgcmV0dXJuIE1hdGguc3FydCgxIC0gLS1rICogayk7CiAgICAgICAgfQogICAgICB9LAogICAgICBiYWNrOiB7CiAgICAgICAgc3R5bGU6ICdjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyLCAxLjI3NSknLAogICAgICAgIGZuOiBmdW5jdGlvbiBmbihrKSB7CiAgICAgICAgICB2YXIgYiA9IDQ7CiAgICAgICAgICByZXR1cm4gKGsgPSBrIC0gMSkgKiBrICogKChiICsgMSkgKiBrICsgYikgKyAxOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYm91bmNlOiB7CiAgICAgICAgc3R5bGU6ICcnLAogICAgICAgIGZuOiBmdW5jdGlvbiBmbihrKSB7CiAgICAgICAgICBpZiAoKGsgLz0gMSkgPCAxIC8gMi43NSkgewogICAgICAgICAgICByZXR1cm4gNy41NjI1ICogayAqIGs7CiAgICAgICAgICB9IGVsc2UgaWYgKGsgPCAyIC8gMi43NSkgewogICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKGsgLT0gMS41IC8gMi43NSkgKiBrICsgMC43NTsKICAgICAgICAgIH0gZWxzZSBpZiAoayA8IDIuNSAvIDIuNzUpIHsKICAgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqIChrIC09IDIuMjUgLyAyLjc1KSAqIGsgKyAwLjkzNzU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKGsgLT0gMi42MjUgLyAyLjc1KSAqIGsgKyAwLjk4NDM3NTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGVsYXN0aWM6IHsKICAgICAgICBzdHlsZTogJycsCiAgICAgICAgZm46IGZ1bmN0aW9uIGZuKGspIHsKICAgICAgICAgIHZhciBmID0gMC4yMiwKICAgICAgICAgICAgICBlID0gMC40OwoKICAgICAgICAgIGlmIChrID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChrID09IDEpIHsKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGUgKiBNYXRoLnBvdygyLCAtMTAgKiBrKSAqIE1hdGguc2luKChrIC0gZiAvIDQpICogKDIgKiBNYXRoLlBJKSAvIGYpICsgMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIG1lLnRhcCA9IGZ1bmN0aW9uIChlLCBldmVudE5hbWUpIHsKICAgICAgdmFyIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7CiAgICAgIGV2LmluaXRFdmVudChldmVudE5hbWUsIHRydWUsIHRydWUpOwogICAgICBldi5wYWdlWCA9IGUucGFnZVg7CiAgICAgIGV2LnBhZ2VZID0gZS5wYWdlWTsKICAgICAgZS50YXJnZXQuZGlzcGF0Y2hFdmVudChldik7CiAgICB9OwoKICAgIG1lLmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0LAogICAgICAgICAgZXY7CgogICAgICBpZiAoIS8oU0VMRUNUfElOUFVUfFRFWFRBUkVBKS9pLnRlc3QodGFyZ2V0LnRhZ05hbWUpKSB7CiAgICAgICAgZXYgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsKICAgICAgICBldi5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCBlLnZpZXcsIDEsIHRhcmdldC5zY3JlZW5YLCB0YXJnZXQuc2NyZWVuWSwgdGFyZ2V0LmNsaWVudFgsIHRhcmdldC5jbGllbnRZLCBlLmN0cmxLZXksIGUuYWx0S2V5LCBlLnNoaWZ0S2V5LCBlLm1ldGFLZXksIDAsIG51bGwpOwogICAgICAgIGV2Ll9jb25zdHJ1Y3RlZCA9IHRydWU7CiAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXYpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiBtZTsKICB9KCk7CgogIGZ1bmN0aW9uIElTY3JvbGwoZWwsIG9wdGlvbnMpIHsKICAgIHRoaXMud3JhcHBlciA9IHR5cGVvZiBlbCA9PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7CiAgICB0aGlzLnNjcm9sbGVyID0gdGhpcy53cmFwcGVyLmNoaWxkcmVuWzBdOwogICAgdGhpcy5zY3JvbGxlclN0eWxlID0gdGhpcy5zY3JvbGxlci5zdHlsZTsgLy8gY2FjaGUgc3R5bGUgZm9yIGJldHRlciBwZXJmb3JtYW5jZQoKICAgIHRoaXMub3B0aW9ucyA9IHsKICAgICAgcmVzaXplU2Nyb2xsYmFyczogdHJ1ZSwKICAgICAgbW91c2VXaGVlbFNwZWVkOiAyMCwKICAgICAgc25hcFRocmVzaG9sZDogMC4zMzQsCiAgICAgIC8vIElOU0VSVCBQT0lOVDogT1BUSU9OUyAKICAgICAgc3RhcnRYOiAwLAogICAgICBzdGFydFk6IDAsCiAgICAgIHNjcm9sbFk6IHRydWUsCiAgICAgIGRpcmVjdGlvbkxvY2tUaHJlc2hvbGQ6IDUsCiAgICAgIG1vbWVudHVtOiB0cnVlLAogICAgICBib3VuY2U6IHRydWUsCiAgICAgIGJvdW5jZVRpbWU6IDYwMCwKICAgICAgYm91bmNlRWFzaW5nOiAnJywKICAgICAgcHJldmVudERlZmF1bHQ6IHRydWUsCiAgICAgIHByZXZlbnREZWZhdWx0RXhjZXB0aW9uOiB7CiAgICAgICAgdGFnTmFtZTogL14oSU5QVVR8VEVYVEFSRUF8QlVUVE9OfFNFTEVDVCkkLwogICAgICB9LAogICAgICBIV0NvbXBvc2l0aW5nOiB0cnVlLAogICAgICB1c2VUcmFuc2l0aW9uOiB0cnVlLAogICAgICB1c2VUcmFuc2Zvcm06IHRydWUKICAgIH07CgogICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7CiAgICAgIHRoaXMub3B0aW9uc1tpXSA9IG9wdGlvbnNbaV07CiAgICB9IC8vIE5vcm1hbGl6ZSBvcHRpb25zCgoKICAgIHRoaXMudHJhbnNsYXRlWiA9IHRoaXMub3B0aW9ucy5IV0NvbXBvc2l0aW5nICYmIHV0aWxzLmhhc1BlcnNwZWN0aXZlID8gJyB0cmFuc2xhdGVaKDApJyA6ICcnOwogICAgdGhpcy5vcHRpb25zLnVzZVRyYW5zaXRpb24gPSB1dGlscy5oYXNUcmFuc2l0aW9uICYmIHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uOwogICAgdGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybSA9IHV0aWxzLmhhc1RyYW5zZm9ybSAmJiB0aGlzLm9wdGlvbnMudXNlVHJhbnNmb3JtOwogICAgdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCA9PT0gdHJ1ZSA/ICd2ZXJ0aWNhbCcgOiB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaDsKICAgIHRoaXMub3B0aW9ucy5wcmV2ZW50RGVmYXVsdCA9ICF0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCAmJiB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQ7IC8vIElmIHlvdSB3YW50IGV2ZW50UGFzc3Rocm91Z2ggSSBoYXZlIHRvIGxvY2sgb25lIG9mIHRoZSBheGVzCgogICAgdGhpcy5vcHRpb25zLnNjcm9sbFkgPSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCA9PSAndmVydGljYWwnID8gZmFsc2UgOiB0aGlzLm9wdGlvbnMuc2Nyb2xsWTsKICAgIHRoaXMub3B0aW9ucy5zY3JvbGxYID0gdGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPT0gJ2hvcml6b250YWwnID8gZmFsc2UgOiB0aGlzLm9wdGlvbnMuc2Nyb2xsWDsgLy8gV2l0aCBldmVudFBhc3N0aHJvdWdoIHdlIGFsc28gbmVlZCBsb2NrRGlyZWN0aW9uIG1lY2hhbmlzbQoKICAgIHRoaXMub3B0aW9ucy5mcmVlU2Nyb2xsID0gdGhpcy5vcHRpb25zLmZyZWVTY3JvbGwgJiYgIXRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoOwogICAgdGhpcy5vcHRpb25zLmRpcmVjdGlvbkxvY2tUaHJlc2hvbGQgPSB0aGlzLm9wdGlvbnMuZXZlbnRQYXNzdGhyb3VnaCA/IDAgOiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uTG9ja1RocmVzaG9sZDsKICAgIHRoaXMub3B0aW9ucy5ib3VuY2VFYXNpbmcgPSB0eXBlb2YgdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZyA9PSAnc3RyaW5nJyA/IHV0aWxzLmVhc2VbdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZ10gfHwgdXRpbHMuZWFzZS5jaXJjdWxhciA6IHRoaXMub3B0aW9ucy5ib3VuY2VFYXNpbmc7CiAgICB0aGlzLm9wdGlvbnMucmVzaXplUG9sbGluZyA9IHRoaXMub3B0aW9ucy5yZXNpemVQb2xsaW5nID09PSB1bmRlZmluZWQgPyA2MCA6IHRoaXMub3B0aW9ucy5yZXNpemVQb2xsaW5nOwoKICAgIGlmICh0aGlzLm9wdGlvbnMudGFwID09PSB0cnVlKSB7CiAgICAgIHRoaXMub3B0aW9ucy50YXAgPSAndGFwJzsKICAgIH0KCiAgICBpZiAodGhpcy5vcHRpb25zLnNocmlua1Njcm9sbGJhcnMgPT0gJ3NjYWxlJykgewogICAgICB0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiA9IGZhbHNlOwogICAgfQoKICAgIHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbiA/IC0xIDogMTsKCiAgICBpZiAodGhpcy5vcHRpb25zLnByb2JlVHlwZSA9PSAzKSB7CiAgICAgIHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uID0gZmFsc2U7CiAgICB9IC8vIElOU0VSVCBQT0lOVDogTk9STUFMSVpBVElPTgogICAgLy8gU29tZSBkZWZhdWx0cwkKCgogICAgdGhpcy54ID0gMDsKICAgIHRoaXMueSA9IDA7CiAgICB0aGlzLmRpcmVjdGlvblggPSAwOwogICAgdGhpcy5kaXJlY3Rpb25ZID0gMDsKICAgIHRoaXMuX2V2ZW50cyA9IHt9OyAvLyBJTlNFUlQgUE9JTlQ6IERFRkFVTFRTCgogICAgdGhpcy5faW5pdCgpOwoKICAgIHRoaXMucmVmcmVzaCgpOwogICAgdGhpcy5zY3JvbGxUbyh0aGlzLm9wdGlvbnMuc3RhcnRYLCB0aGlzLm9wdGlvbnMuc3RhcnRZKTsKICAgIHRoaXMuZW5hYmxlKCk7CiAgfQoKICBJU2Nyb2xsLnByb3RvdHlwZSA9IHsKICAgIHZlcnNpb246ICc1LjEuMicsCiAgICBfaW5pdDogZnVuY3Rpb24gX2luaXQoKSB7CiAgICAgIHRoaXMuX2luaXRFdmVudHMoKTsKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2Nyb2xsYmFycyB8fCB0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykgewogICAgICAgIHRoaXMuX2luaXRJbmRpY2F0b3JzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9wdGlvbnMubW91c2VXaGVlbCkgewogICAgICAgIHRoaXMuX2luaXRXaGVlbCgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXApIHsKICAgICAgICB0aGlzLl9pbml0U25hcCgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb25zLmtleUJpbmRpbmdzKSB7CiAgICAgICAgdGhpcy5faW5pdEtleXMoKTsKICAgICAgfSAvLyBJTlNFUlQgUE9JTlQ6IF9pbml0CgogICAgfSwKICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICAgIHRoaXMuX2luaXRFdmVudHModHJ1ZSk7CgogICAgICB0aGlzLl9leGVjRXZlbnQoJ2Rlc3Ryb3knKTsKICAgIH0sCiAgICBfdHJhbnNpdGlvbkVuZDogZnVuY3Rpb24gX3RyYW5zaXRpb25FbmQoZSkgewogICAgICBpZiAoZS50YXJnZXQgIT0gdGhpcy5zY3JvbGxlciB8fCAhdGhpcy5pc0luVHJhbnNpdGlvbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5fdHJhbnNpdGlvblRpbWUoKTsKCiAgICAgIGlmICghdGhpcy5yZXNldFBvc2l0aW9uKHRoaXMub3B0aW9ucy5ib3VuY2VUaW1lKSkgewogICAgICAgIHRoaXMuaXNJblRyYW5zaXRpb24gPSBmYWxzZTsKCiAgICAgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTsKICAgICAgfQogICAgfSwKICAgIF9zdGFydDogZnVuY3Rpb24gX3N0YXJ0KGUpIHsKICAgICAgLy8gUmVhY3QgdG8gbGVmdCBtb3VzZSBidXR0b24gb25seQogICAgICBpZiAodXRpbHMuZXZlbnRUeXBlW2UudHlwZV0gIT0gMSkgewogICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgdGhpcy5pbml0aWF0ZWQgJiYgdXRpbHMuZXZlbnRUeXBlW2UudHlwZV0gIT09IHRoaXMuaW5pdGlhdGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0ICYmICF1dGlscy5pc0JhZEFuZHJvaWQgJiYgIXV0aWxzLnByZXZlbnREZWZhdWx0RXhjZXB0aW9uKGUudGFyZ2V0LCB0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHRFeGNlcHRpb24pKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CgogICAgICB2YXIgcG9pbnQgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0gOiBlLAogICAgICAgICAgcG9zOwogICAgICB0aGlzLmluaXRpYXRlZCA9IHV0aWxzLmV2ZW50VHlwZVtlLnR5cGVdOwogICAgICB0aGlzLm1vdmVkID0gZmFsc2U7CiAgICAgIHRoaXMuZGlzdFggPSAwOwogICAgICB0aGlzLmRpc3RZID0gMDsKICAgICAgdGhpcy5kaXJlY3Rpb25YID0gMDsKICAgICAgdGhpcy5kaXJlY3Rpb25ZID0gMDsKICAgICAgdGhpcy5kaXJlY3Rpb25Mb2NrZWQgPSAwOwoKICAgICAgdGhpcy5fdHJhbnNpdGlvblRpbWUoKTsKCiAgICAgIHRoaXMuc3RhcnRUaW1lID0gdXRpbHMuZ2V0VGltZSgpOwoKICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIHRoaXMuaXNJblRyYW5zaXRpb24pIHsKICAgICAgICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gZmFsc2U7CiAgICAgICAgcG9zID0gdGhpcy5nZXRDb21wdXRlZFBvc2l0aW9uKCk7CgogICAgICAgIHRoaXMuX3RyYW5zbGF0ZShNYXRoLnJvdW5kKHBvcy54KSwgTWF0aC5yb3VuZChwb3MueSkpOwoKICAgICAgICB0aGlzLl9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiB0aGlzLmlzQW5pbWF0aW5nKSB7CiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlOwoKICAgICAgICB0aGlzLl9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpOwogICAgICB9CgogICAgICB0aGlzLnN0YXJ0WCA9IHRoaXMueDsKICAgICAgdGhpcy5zdGFydFkgPSB0aGlzLnk7CiAgICAgIHRoaXMuYWJzU3RhcnRYID0gdGhpcy54OwogICAgICB0aGlzLmFic1N0YXJ0WSA9IHRoaXMueTsKICAgICAgdGhpcy5wb2ludFggPSBwb2ludC5wYWdlWDsKICAgICAgdGhpcy5wb2ludFkgPSBwb2ludC5wYWdlWTsKCiAgICAgIHRoaXMuX2V4ZWNFdmVudCgnYmVmb3JlU2Nyb2xsU3RhcnQnKTsKICAgIH0sCiAgICBfbW92ZTogZnVuY3Rpb24gX21vdmUoZSkgewogICAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCB1dGlscy5ldmVudFR5cGVbZS50eXBlXSAhPT0gdGhpcy5pbml0aWF0ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJldmVudERlZmF1bHQpIHsKICAgICAgICAvLyBpbmNyZWFzZXMgcGVyZm9ybWFuY2Ugb24gQW5kcm9pZD8gVE9ETzogY2hlY2shCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9CgogICAgICB2YXIgcG9pbnQgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0gOiBlLAogICAgICAgICAgZGVsdGFYID0gcG9pbnQucGFnZVggLSB0aGlzLnBvaW50WCwKICAgICAgICAgIGRlbHRhWSA9IHBvaW50LnBhZ2VZIC0gdGhpcy5wb2ludFksCiAgICAgICAgICB0aW1lc3RhbXAgPSB1dGlscy5nZXRUaW1lKCksCiAgICAgICAgICBuZXdYLAogICAgICAgICAgbmV3WSwKICAgICAgICAgIGFic0Rpc3RYLAogICAgICAgICAgYWJzRGlzdFk7CiAgICAgIHRoaXMucG9pbnRYID0gcG9pbnQucGFnZVg7CiAgICAgIHRoaXMucG9pbnRZID0gcG9pbnQucGFnZVk7CiAgICAgIHRoaXMuZGlzdFggKz0gZGVsdGFYOwogICAgICB0aGlzLmRpc3RZICs9IGRlbHRhWTsKICAgICAgYWJzRGlzdFggPSBNYXRoLmFicyh0aGlzLmRpc3RYKTsKICAgICAgYWJzRGlzdFkgPSBNYXRoLmFicyh0aGlzLmRpc3RZKTsgLy8gV2UgbmVlZCB0byBtb3ZlIGF0IGxlYXN0IDEwIHBpeGVscyBmb3IgdGhlIHNjcm9sbGluZyB0byBpbml0aWF0ZQoKICAgICAgaWYgKHRpbWVzdGFtcCAtIHRoaXMuZW5kVGltZSA+IDMwMCAmJiBhYnNEaXN0WCA8IDEwICYmIGFic0Rpc3RZIDwgMTApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gSWYgeW91IGFyZSBzY3JvbGxpbmcgaW4gb25lIGRpcmVjdGlvbiBsb2NrIHRoZSBvdGhlcgoKCiAgICAgIGlmICghdGhpcy5kaXJlY3Rpb25Mb2NrZWQgJiYgIXRoaXMub3B0aW9ucy5mcmVlU2Nyb2xsKSB7CiAgICAgICAgaWYgKGFic0Rpc3RYID4gYWJzRGlzdFkgKyB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uTG9ja1RocmVzaG9sZCkgewogICAgICAgICAgdGhpcy5kaXJlY3Rpb25Mb2NrZWQgPSAnaCc7IC8vIGxvY2sgaG9yaXpvbnRhbGx5CiAgICAgICAgfSBlbHNlIGlmIChhYnNEaXN0WSA+PSBhYnNEaXN0WCArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb25Mb2NrVGhyZXNob2xkKSB7CiAgICAgICAgICB0aGlzLmRpcmVjdGlvbkxvY2tlZCA9ICd2JzsgLy8gbG9jayB2ZXJ0aWNhbGx5CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGlyZWN0aW9uTG9ja2VkID0gJ24nOyAvLyBubyBsb2NrCiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5kaXJlY3Rpb25Mb2NrZWQgPT0gJ2gnKSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICd2ZXJ0aWNhbCcpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICdob3Jpem9udGFsJykgewogICAgICAgICAgdGhpcy5pbml0aWF0ZWQgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGRlbHRhWSA9IDA7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kaXJlY3Rpb25Mb2NrZWQgPT0gJ3YnKSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ldmVudFBhc3N0aHJvdWdoID09ICdob3Jpem9udGFsJykgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmV2ZW50UGFzc3Rocm91Z2ggPT0gJ3ZlcnRpY2FsJykgewogICAgICAgICAgdGhpcy5pbml0aWF0ZWQgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGRlbHRhWCA9IDA7CiAgICAgIH0KCiAgICAgIGRlbHRhWCA9IHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCA/IGRlbHRhWCA6IDA7CiAgICAgIGRlbHRhWSA9IHRoaXMuaGFzVmVydGljYWxTY3JvbGwgPyBkZWx0YVkgOiAwOwogICAgICBuZXdYID0gdGhpcy54ICsgZGVsdGFYOwogICAgICBuZXdZID0gdGhpcy55ICsgZGVsdGFZOyAvLyBTbG93IGRvd24gaWYgb3V0c2lkZSBvZiB0aGUgYm91bmRhcmllcwoKICAgICAgaWYgKG5ld1ggPiAwIHx8IG5ld1ggPCB0aGlzLm1heFNjcm9sbFgpIHsKICAgICAgICBuZXdYID0gdGhpcy5vcHRpb25zLmJvdW5jZSA/IHRoaXMueCArIGRlbHRhWCAvIDMgOiBuZXdYID4gMCA/IDAgOiB0aGlzLm1heFNjcm9sbFg7CiAgICAgIH0KCiAgICAgIGlmIChuZXdZID4gMCB8fCBuZXdZIDwgdGhpcy5tYXhTY3JvbGxZKSB7CiAgICAgICAgbmV3WSA9IHRoaXMub3B0aW9ucy5ib3VuY2UgPyB0aGlzLnkgKyBkZWx0YVkgLyAzIDogbmV3WSA+IDAgPyAwIDogdGhpcy5tYXhTY3JvbGxZOwogICAgICB9CgogICAgICB0aGlzLmRpcmVjdGlvblggPSBkZWx0YVggPiAwID8gLTEgOiBkZWx0YVggPCAwID8gMSA6IDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uWSA9IGRlbHRhWSA+IDAgPyAtMSA6IGRlbHRhWSA8IDAgPyAxIDogMDsKCiAgICAgIGlmICghdGhpcy5tb3ZlZCkgewogICAgICAgIHRoaXMuX2V4ZWNFdmVudCgnc2Nyb2xsU3RhcnQnKTsKICAgICAgfQoKICAgICAgdGhpcy5tb3ZlZCA9IHRydWU7CgogICAgICB0aGlzLl90cmFuc2xhdGUobmV3WCwgbmV3WSk7CiAgICAgIC8qIFJFUExBQ0UgU1RBUlQ6IF9tb3ZlICovCgoKICAgICAgaWYgKHRpbWVzdGFtcCAtIHRoaXMuc3RhcnRUaW1lID4gMzAwKSB7CiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSB0aW1lc3RhbXA7CiAgICAgICAgdGhpcy5zdGFydFggPSB0aGlzLng7CiAgICAgICAgdGhpcy5zdGFydFkgPSB0aGlzLnk7CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJvYmVUeXBlID09IDEpIHsKICAgICAgICAgIHRoaXMuX2V4ZWNFdmVudCgnc2Nyb2xsJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb25zLnByb2JlVHlwZSA+IDEpIHsKICAgICAgICB0aGlzLl9leGVjRXZlbnQoJ3Njcm9sbCcpOwogICAgICB9CiAgICAgIC8qIFJFUExBQ0UgRU5EOiBfbW92ZSAqLwoKICAgIH0sCiAgICBfZW5kOiBmdW5jdGlvbiBfZW5kKGUpIHsKICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgdXRpbHMuZXZlbnRUeXBlW2UudHlwZV0gIT09IHRoaXMuaW5pdGlhdGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0ICYmICF1dGlscy5wcmV2ZW50RGVmYXVsdEV4Y2VwdGlvbihlLnRhcmdldCwgdGhpcy5vcHRpb25zLnByZXZlbnREZWZhdWx0RXhjZXB0aW9uKSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQoKICAgICAgdmFyIHBvaW50ID0gZS5jaGFuZ2VkVG91Y2hlcyA/IGUuY2hhbmdlZFRvdWNoZXNbMF0gOiBlLAogICAgICAgICAgbW9tZW50dW1YLAogICAgICAgICAgbW9tZW50dW1ZLAogICAgICAgICAgZHVyYXRpb24gPSB1dGlscy5nZXRUaW1lKCkgLSB0aGlzLnN0YXJ0VGltZSwKICAgICAgICAgIG5ld1ggPSBNYXRoLnJvdW5kKHRoaXMueCksCiAgICAgICAgICBuZXdZID0gTWF0aC5yb3VuZCh0aGlzLnkpLAogICAgICAgICAgZGlzdGFuY2VYID0gTWF0aC5hYnMobmV3WCAtIHRoaXMuc3RhcnRYKSwKICAgICAgICAgIGRpc3RhbmNlWSA9IE1hdGguYWJzKG5ld1kgLSB0aGlzLnN0YXJ0WSksCiAgICAgICAgICB0aW1lID0gMCwKICAgICAgICAgIGVhc2luZyA9ICcnOwogICAgICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gMDsKICAgICAgdGhpcy5pbml0aWF0ZWQgPSAwOwogICAgICB0aGlzLmVuZFRpbWUgPSB1dGlscy5nZXRUaW1lKCk7IC8vIHJlc2V0IGlmIHdlIGFyZSBvdXRzaWRlIG9mIHRoZSBib3VuZGFyaWVzCgogICAgICBpZiAodGhpcy5yZXNldFBvc2l0aW9uKHRoaXMub3B0aW9ucy5ib3VuY2VUaW1lKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zY3JvbGxUbyhuZXdYLCBuZXdZKTsgLy8gZW5zdXJlcyB0aGF0IHRoZSBsYXN0IHBvc2l0aW9uIGlzIHJvdW5kZWQKICAgICAgLy8gd2Ugc2Nyb2xsZWQgbGVzcyB0aGFuIDEwIHBpeGVscwoKICAgICAgaWYgKCF0aGlzLm1vdmVkKSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50YXApIHsKICAgICAgICAgIHV0aWxzLnRhcChlLCB0aGlzLm9wdGlvbnMudGFwKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xpY2spIHsKICAgICAgICAgIHV0aWxzLmNsaWNrKGUpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGxDYW5jZWwnKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5fZXZlbnRzLmZsaWNrICYmIGR1cmF0aW9uIDwgMjAwICYmIGRpc3RhbmNlWCA8IDEwMCAmJiBkaXN0YW5jZVkgPCAxMDApIHsKICAgICAgICB0aGlzLl9leGVjRXZlbnQoJ2ZsaWNrJyk7CgogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBzdGFydCBtb21lbnR1bSBhbmltYXRpb24gaWYgbmVlZGVkCgoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5tb21lbnR1bSAmJiBkdXJhdGlvbiA8IDMwMCkgewogICAgICAgIG1vbWVudHVtWCA9IHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCA/IHV0aWxzLm1vbWVudHVtKHRoaXMueCwgdGhpcy5zdGFydFgsIGR1cmF0aW9uLCB0aGlzLm1heFNjcm9sbFgsIHRoaXMub3B0aW9ucy5ib3VuY2UgPyB0aGlzLndyYXBwZXJXaWR0aCA6IDAsIHRoaXMub3B0aW9ucy5kZWNlbGVyYXRpb24pIDogewogICAgICAgICAgZGVzdGluYXRpb246IG5ld1gsCiAgICAgICAgICBkdXJhdGlvbjogMAogICAgICAgIH07CiAgICAgICAgbW9tZW50dW1ZID0gdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCA/IHV0aWxzLm1vbWVudHVtKHRoaXMueSwgdGhpcy5zdGFydFksIGR1cmF0aW9uLCB0aGlzLm1heFNjcm9sbFksIHRoaXMub3B0aW9ucy5ib3VuY2UgPyB0aGlzLndyYXBwZXJIZWlnaHQgOiAwLCB0aGlzLm9wdGlvbnMuZGVjZWxlcmF0aW9uKSA6IHsKICAgICAgICAgIGRlc3RpbmF0aW9uOiBuZXdZLAogICAgICAgICAgZHVyYXRpb246IDAKICAgICAgICB9OwogICAgICAgIG5ld1ggPSBtb21lbnR1bVguZGVzdGluYXRpb247CiAgICAgICAgbmV3WSA9IG1vbWVudHVtWS5kZXN0aW5hdGlvbjsKICAgICAgICB0aW1lID0gTWF0aC5tYXgobW9tZW50dW1YLmR1cmF0aW9uLCBtb21lbnR1bVkuZHVyYXRpb24pOwogICAgICAgIHRoaXMuaXNJblRyYW5zaXRpb24gPSAxOwogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXApIHsKICAgICAgICB2YXIgc25hcCA9IHRoaXMuX25lYXJlc3RTbmFwKG5ld1gsIG5ld1kpOwoKICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gc25hcDsKICAgICAgICB0aW1lID0gdGhpcy5vcHRpb25zLnNuYXBTcGVlZCB8fCBNYXRoLm1heChNYXRoLm1heChNYXRoLm1pbihNYXRoLmFicyhuZXdYIC0gc25hcC54KSwgMTAwMCksIE1hdGgubWluKE1hdGguYWJzKG5ld1kgLSBzbmFwLnkpLCAxMDAwKSksIDMwMCk7CiAgICAgICAgbmV3WCA9IHNuYXAueDsKICAgICAgICBuZXdZID0gc25hcC55OwogICAgICAgIHRoaXMuZGlyZWN0aW9uWCA9IDA7CiAgICAgICAgdGhpcy5kaXJlY3Rpb25ZID0gMDsKICAgICAgICBlYXNpbmcgPSB0aGlzLm9wdGlvbnMuYm91bmNlRWFzaW5nOwogICAgICB9IC8vIElOU0VSVCBQT0lOVDogX2VuZAoKCiAgICAgIGlmIChuZXdYICE9IHRoaXMueCB8fCBuZXdZICE9IHRoaXMueSkgewogICAgICAgIC8vIGNoYW5nZSBlYXNpbmcgZnVuY3Rpb24gd2hlbiBzY3JvbGxlciBnb2VzIG91dCBvZiB0aGUgYm91bmRhcmllcwogICAgICAgIGlmIChuZXdYID4gMCB8fCBuZXdYIDwgdGhpcy5tYXhTY3JvbGxYIHx8IG5ld1kgPiAwIHx8IG5ld1kgPCB0aGlzLm1heFNjcm9sbFkpIHsKICAgICAgICAgIGVhc2luZyA9IHV0aWxzLmVhc2UucXVhZHJhdGljOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zY3JvbGxUbyhuZXdYLCBuZXdZLCB0aW1lLCBlYXNpbmcpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTsKICAgIH0sCiAgICBfcmVzaXplOiBmdW5jdGlvbiBfcmVzaXplKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVvdXQpOwogICAgICB0aGlzLnJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0LnJlZnJlc2goKTsKICAgICAgfSwgdGhpcy5vcHRpb25zLnJlc2l6ZVBvbGxpbmcpOwogICAgfSwKICAgIHJlc2V0UG9zaXRpb246IGZ1bmN0aW9uIHJlc2V0UG9zaXRpb24odGltZSkgewogICAgICB2YXIgeCA9IHRoaXMueCwKICAgICAgICAgIHkgPSB0aGlzLnk7CiAgICAgIHRpbWUgPSB0aW1lIHx8IDA7CgogICAgICBpZiAoIXRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCB8fCB0aGlzLnggPiAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0gZWxzZSBpZiAodGhpcy54IDwgdGhpcy5tYXhTY3JvbGxYKSB7CiAgICAgICAgeCA9IHRoaXMubWF4U2Nyb2xsWDsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsIHx8IHRoaXMueSA+IDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfSBlbHNlIGlmICh0aGlzLnkgPCB0aGlzLm1heFNjcm9sbFkpIHsKICAgICAgICB5ID0gdGhpcy5tYXhTY3JvbGxZOwogICAgICB9CgogICAgICBpZiAoeCA9PSB0aGlzLnggJiYgeSA9PSB0aGlzLnkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMuc2Nyb2xsVG8oeCwgeSwgdGltZSwgdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7CiAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlOwogICAgfSwKICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKCkgewogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHZhciByZiA9IHRoaXMud3JhcHBlci5vZmZzZXRIZWlnaHQ7IC8vIEZvcmNlIHJlZmxvdwoKICAgICAgdGhpcy53cmFwcGVyV2lkdGggPSB0aGlzLndyYXBwZXIuY2xpZW50V2lkdGg7CiAgICAgIHRoaXMud3JhcHBlckhlaWdodCA9IHRoaXMud3JhcHBlci5jbGllbnRIZWlnaHQ7CiAgICAgIC8qIFJFUExBQ0UgU1RBUlQ6IHJlZnJlc2ggKi8KCiAgICAgIHRoaXMuc2Nyb2xsZXJXaWR0aCA9IHRoaXMuc2Nyb2xsZXIub2Zmc2V0V2lkdGg7CiAgICAgIHRoaXMuc2Nyb2xsZXJIZWlnaHQgPSB0aGlzLnNjcm9sbGVyLm9mZnNldEhlaWdodDsKICAgICAgdGhpcy5tYXhTY3JvbGxYID0gdGhpcy53cmFwcGVyV2lkdGggLSB0aGlzLnNjcm9sbGVyV2lkdGg7CiAgICAgIHRoaXMubWF4U2Nyb2xsWSA9IHRoaXMud3JhcHBlckhlaWdodCAtIHRoaXMuc2Nyb2xsZXJIZWlnaHQ7CiAgICAgIC8qIFJFUExBQ0UgRU5EOiByZWZyZXNoICovCgogICAgICB0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgPSB0aGlzLm9wdGlvbnMuc2Nyb2xsWCAmJiB0aGlzLm1heFNjcm9sbFggPCAwOwogICAgICB0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsID0gdGhpcy5vcHRpb25zLnNjcm9sbFkgJiYgdGhpcy5tYXhTY3JvbGxZIDwgMDsKCiAgICAgIGlmICghdGhpcy5oYXNIb3Jpem9udGFsU2Nyb2xsKSB7CiAgICAgICAgdGhpcy5tYXhTY3JvbGxYID0gMDsKICAgICAgICB0aGlzLnNjcm9sbGVyV2lkdGggPSB0aGlzLndyYXBwZXJXaWR0aDsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsKSB7CiAgICAgICAgdGhpcy5tYXhTY3JvbGxZID0gMDsKICAgICAgICB0aGlzLnNjcm9sbGVySGVpZ2h0ID0gdGhpcy53cmFwcGVySGVpZ2h0OwogICAgICB9CgogICAgICB0aGlzLmVuZFRpbWUgPSAwOwogICAgICB0aGlzLmRpcmVjdGlvblggPSAwOwogICAgICB0aGlzLmRpcmVjdGlvblkgPSAwOwogICAgICB0aGlzLndyYXBwZXJPZmZzZXQgPSB1dGlscy5vZmZzZXQodGhpcy53cmFwcGVyKTsKCiAgICAgIHRoaXMuX2V4ZWNFdmVudCgncmVmcmVzaCcpOwoKICAgICAgdGhpcy5yZXNldFBvc2l0aW9uKCk7IC8vIElOU0VSVCBQT0lOVDogX3JlZnJlc2gKICAgIH0sCiAgICBvbjogZnVuY3Rpb24gb24odHlwZSwgZm4pIHsKICAgICAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pIHsKICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbXTsKICAgICAgfQoKICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2goZm4pOwogICAgfSwKICAgIG9mZjogZnVuY3Rpb24gb2ZmKHR5cGUsIGZuKSB7CiAgICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaW5kZXggPSB0aGlzLl9ldmVudHNbdHlwZV0uaW5kZXhPZihmbik7CgogICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9LAogICAgX2V4ZWNFdmVudDogZnVuY3Rpb24gX2V4ZWNFdmVudCh0eXBlKSB7CiAgICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaSA9IDAsCiAgICAgICAgICBsID0gdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aDsKCiAgICAgIGlmICghbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yICg7IGkgPCBsOyBpKyspIHsKICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV1baV0uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbEJ5OiBmdW5jdGlvbiBzY3JvbGxCeSh4LCB5LCB0aW1lLCBlYXNpbmcpIHsKICAgICAgeCA9IHRoaXMueCArIHg7CiAgICAgIHkgPSB0aGlzLnkgKyB5OwogICAgICB0aW1lID0gdGltZSB8fCAwOwogICAgICB0aGlzLnNjcm9sbFRvKHgsIHksIHRpbWUsIGVhc2luZyk7CiAgICB9LAogICAgc2Nyb2xsVG86IGZ1bmN0aW9uIHNjcm9sbFRvKHgsIHksIHRpbWUsIGVhc2luZykgewogICAgICBlYXNpbmcgPSBlYXNpbmcgfHwgdXRpbHMuZWFzZS5jaXJjdWxhcjsKICAgICAgdGhpcy5pc0luVHJhbnNpdGlvbiA9IHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIHRpbWUgPiAwOwoKICAgICAgaWYgKCF0aW1lIHx8IHRoaXMub3B0aW9ucy51c2VUcmFuc2l0aW9uICYmIGVhc2luZy5zdHlsZSkgewogICAgICAgIHRoaXMuX3RyYW5zaXRpb25UaW1pbmdGdW5jdGlvbihlYXNpbmcuc3R5bGUpOwoKICAgICAgICB0aGlzLl90cmFuc2l0aW9uVGltZSh0aW1lKTsKCiAgICAgICAgdGhpcy5fdHJhbnNsYXRlKHgsIHkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2FuaW1hdGUoeCwgeSwgdGltZSwgZWFzaW5nLmZuKTsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbFRvRWxlbWVudDogZnVuY3Rpb24gc2Nyb2xsVG9FbGVtZW50KGVsLCB0aW1lLCBvZmZzZXRYLCBvZmZzZXRZLCBlYXNpbmcpIHsKICAgICAgZWwgPSBlbC5ub2RlVHlwZSA/IGVsIDogdGhpcy5zY3JvbGxlci5xdWVyeVNlbGVjdG9yKGVsKTsKCiAgICAgIGlmICghZWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwb3MgPSB1dGlscy5vZmZzZXQoZWwpOwogICAgICBwb3MubGVmdCAtPSB0aGlzLndyYXBwZXJPZmZzZXQubGVmdDsKICAgICAgcG9zLnRvcCAtPSB0aGlzLndyYXBwZXJPZmZzZXQudG9wOyAvLyBpZiBvZmZzZXRYL1kgYXJlIHRydWUgd2UgY2VudGVyIHRoZSBlbGVtZW50IHRvIHRoZSBzY3JlZW4KCiAgICAgIGlmIChvZmZzZXRYID09PSB0cnVlKSB7CiAgICAgICAgb2Zmc2V0WCA9IE1hdGgucm91bmQoZWwub2Zmc2V0V2lkdGggLyAyIC0gdGhpcy53cmFwcGVyLm9mZnNldFdpZHRoIC8gMik7CiAgICAgIH0KCiAgICAgIGlmIChvZmZzZXRZID09PSB0cnVlKSB7CiAgICAgICAgb2Zmc2V0WSA9IE1hdGgucm91bmQoZWwub2Zmc2V0SGVpZ2h0IC8gMiAtIHRoaXMud3JhcHBlci5vZmZzZXRIZWlnaHQgLyAyKTsKICAgICAgfQoKICAgICAgcG9zLmxlZnQgLT0gb2Zmc2V0WCB8fCAwOwogICAgICBwb3MudG9wIC09IG9mZnNldFkgfHwgMDsKICAgICAgcG9zLmxlZnQgPSBwb3MubGVmdCA+IDAgPyAwIDogcG9zLmxlZnQgPCB0aGlzLm1heFNjcm9sbFggPyB0aGlzLm1heFNjcm9sbFggOiBwb3MubGVmdDsKICAgICAgcG9zLnRvcCA9IHBvcy50b3AgPiAwID8gMCA6IHBvcy50b3AgPCB0aGlzLm1heFNjcm9sbFkgPyB0aGlzLm1heFNjcm9sbFkgOiBwb3MudG9wOwogICAgICB0aW1lID0gdGltZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWUgPT09IG51bGwgfHwgdGltZSA9PT0gJ2F1dG8nID8gTWF0aC5tYXgoTWF0aC5hYnModGhpcy54IC0gcG9zLmxlZnQpLCBNYXRoLmFicyh0aGlzLnkgLSBwb3MudG9wKSkgOiB0aW1lOwogICAgICB0aGlzLnNjcm9sbFRvKHBvcy5sZWZ0LCBwb3MudG9wLCB0aW1lLCBlYXNpbmcpOwogICAgfSwKICAgIF90cmFuc2l0aW9uVGltZTogZnVuY3Rpb24gX3RyYW5zaXRpb25UaW1lKHRpbWUpIHsKICAgICAgdGltZSA9IHRpbWUgfHwgMDsKICAgICAgdGhpcy5zY3JvbGxlclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbl0gPSB0aW1lICsgJ21zJzsKCiAgICAgIGlmICghdGltZSAmJiB1dGlscy5pc0JhZEFuZHJvaWQpIHsKICAgICAgICB0aGlzLnNjcm9sbGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9ICcwLjAwMXMnOwogICAgICB9CgogICAgICBpZiAodGhpcy5pbmRpY2F0b3JzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuaW5kaWNhdG9ycy5sZW5ndGg7IGktLTspIHsKICAgICAgICAgIHRoaXMuaW5kaWNhdG9yc1tpXS50cmFuc2l0aW9uVGltZSh0aW1lKTsKICAgICAgICB9CiAgICAgIH0gLy8gSU5TRVJUIFBPSU5UOiBfdHJhbnNpdGlvblRpbWUKCiAgICB9LAogICAgX3RyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogZnVuY3Rpb24gX3RyYW5zaXRpb25UaW1pbmdGdW5jdGlvbihlYXNpbmcpIHsKICAgICAgdGhpcy5zY3JvbGxlclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbl0gPSBlYXNpbmc7CgogICAgICBpZiAodGhpcy5pbmRpY2F0b3JzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuaW5kaWNhdG9ycy5sZW5ndGg7IGktLTspIHsKICAgICAgICAgIHRoaXMuaW5kaWNhdG9yc1tpXS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24oZWFzaW5nKTsKICAgICAgICB9CiAgICAgIH0gLy8gSU5TRVJUIFBPSU5UOiBfdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uCgogICAgfSwKICAgIF90cmFuc2xhdGU6IGZ1bmN0aW9uIF90cmFuc2xhdGUoeCwgeSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVRyYW5zZm9ybSkgewogICAgICAgIC8qIFJFUExBQ0UgU1RBUlQ6IF90cmFuc2xhdGUgKi8KICAgICAgICB0aGlzLnNjcm9sbGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNmb3JtXSA9ICd0cmFuc2xhdGUoJyArIHggKyAncHgsJyArIHkgKyAncHgpJyArIHRoaXMudHJhbnNsYXRlWjsKICAgICAgICAvKiBSRVBMQUNFIEVORDogX3RyYW5zbGF0ZSAqLwogICAgICB9IGVsc2UgewogICAgICAgIHggPSBNYXRoLnJvdW5kKHgpOwogICAgICAgIHkgPSBNYXRoLnJvdW5kKHkpOwogICAgICAgIHRoaXMuc2Nyb2xsZXJTdHlsZS5sZWZ0ID0geCArICdweCc7CiAgICAgICAgdGhpcy5zY3JvbGxlclN0eWxlLnRvcCA9IHkgKyAncHgnOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwoKICAgICAgaWYgKHRoaXMuaW5kaWNhdG9ycykgewogICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmluZGljYXRvcnMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICB0aGlzLmluZGljYXRvcnNbaV0udXBkYXRlUG9zaXRpb24oKTsKICAgICAgICB9CiAgICAgIH0gLy8gSU5TRVJUIFBPSU5UOiBfdHJhbnNsYXRlCgogICAgfSwKICAgIF9pbml0RXZlbnRzOiBmdW5jdGlvbiBfaW5pdEV2ZW50cyhyZW1vdmUpIHsKICAgICAgdmFyIGV2ZW50VHlwZSA9IHJlbW92ZSA/IHV0aWxzLnJlbW92ZUV2ZW50IDogdXRpbHMuYWRkRXZlbnQsCiAgICAgICAgICB0YXJnZXQgPSB0aGlzLm9wdGlvbnMuYmluZFRvV3JhcHBlciA/IHRoaXMud3JhcHBlciA6IHdpbmRvdzsKICAgICAgZXZlbnRUeXBlKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcyk7CiAgICAgIGV2ZW50VHlwZSh3aW5kb3csICdyZXNpemUnLCB0aGlzKTsKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xpY2spIHsKICAgICAgICBldmVudFR5cGUodGhpcy53cmFwcGVyLCAnY2xpY2snLCB0aGlzLCB0cnVlKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZGlzYWJsZU1vdXNlKSB7CiAgICAgICAgZXZlbnRUeXBlKHRoaXMud3JhcHBlciwgJ21vdXNlZG93bicsIHRoaXMpOwogICAgICAgIGV2ZW50VHlwZSh0YXJnZXQsICdtb3VzZW1vdmUnLCB0aGlzKTsKICAgICAgICBldmVudFR5cGUodGFyZ2V0LCAnbW91c2VjYW5jZWwnLCB0aGlzKTsKICAgICAgICBldmVudFR5cGUodGFyZ2V0LCAnbW91c2V1cCcsIHRoaXMpOwogICAgICB9CgogICAgICBpZiAodXRpbHMuaGFzUG9pbnRlciAmJiAhdGhpcy5vcHRpb25zLmRpc2FibGVQb2ludGVyKSB7CiAgICAgICAgZXZlbnRUeXBlKHRoaXMud3JhcHBlciwgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVyZG93bicpLCB0aGlzKTsKICAgICAgICBldmVudFR5cGUodGFyZ2V0LCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJtb3ZlJyksIHRoaXMpOwogICAgICAgIGV2ZW50VHlwZSh0YXJnZXQsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcmNhbmNlbCcpLCB0aGlzKTsKICAgICAgICBldmVudFR5cGUodGFyZ2V0LCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJ1cCcpLCB0aGlzKTsKICAgICAgfQoKICAgICAgaWYgKHV0aWxzLmhhc1RvdWNoICYmICF0aGlzLm9wdGlvbnMuZGlzYWJsZVRvdWNoKSB7CiAgICAgICAgZXZlbnRUeXBlKHRoaXMud3JhcHBlciwgJ3RvdWNoc3RhcnQnLCB0aGlzKTsKICAgICAgICBldmVudFR5cGUodGFyZ2V0LCAndG91Y2htb3ZlJywgdGhpcyk7CiAgICAgICAgZXZlbnRUeXBlKHRhcmdldCwgJ3RvdWNoY2FuY2VsJywgdGhpcyk7CiAgICAgICAgZXZlbnRUeXBlKHRhcmdldCwgJ3RvdWNoZW5kJywgdGhpcyk7CiAgICAgIH0KCiAgICAgIGV2ZW50VHlwZSh0aGlzLnNjcm9sbGVyLCAndHJhbnNpdGlvbmVuZCcsIHRoaXMpOwogICAgICBldmVudFR5cGUodGhpcy5zY3JvbGxlciwgJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCB0aGlzKTsKICAgICAgZXZlbnRUeXBlKHRoaXMuc2Nyb2xsZXIsICdvVHJhbnNpdGlvbkVuZCcsIHRoaXMpOwogICAgICBldmVudFR5cGUodGhpcy5zY3JvbGxlciwgJ01TVHJhbnNpdGlvbkVuZCcsIHRoaXMpOwogICAgfSwKICAgIGdldENvbXB1dGVkUG9zaXRpb246IGZ1bmN0aW9uIGdldENvbXB1dGVkUG9zaXRpb24oKSB7CiAgICAgIHZhciBtYXRyaXggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnNjcm9sbGVyLCBudWxsKSwKICAgICAgICAgIHgsCiAgICAgICAgICB5OwoKICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VUcmFuc2Zvcm0pIHsKICAgICAgICBtYXRyaXggPSBtYXRyaXhbdXRpbHMuc3R5bGUudHJhbnNmb3JtXS5zcGxpdCgnKScpWzBdLnNwbGl0KCcsICcpOwogICAgICAgIHggPSArKG1hdHJpeFsxMl0gfHwgbWF0cml4WzRdKTsKICAgICAgICB5ID0gKyhtYXRyaXhbMTNdIHx8IG1hdHJpeFs1XSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgeCA9ICttYXRyaXgubGVmdC5yZXBsYWNlKC9bXi1cZC5dL2csICcnKTsKICAgICAgICB5ID0gK21hdHJpeC50b3AucmVwbGFjZSgvW14tXGQuXS9nLCAnJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgeDogeCwKICAgICAgICB5OiB5CiAgICAgIH07CiAgICB9LAogICAgX2luaXRJbmRpY2F0b3JzOiBmdW5jdGlvbiBfaW5pdEluZGljYXRvcnMoKSB7CiAgICAgIHZhciBpbnRlcmFjdGl2ZSA9IHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZVNjcm9sbGJhcnMsCiAgICAgICAgICBjdXN0b21TdHlsZSA9IHR5cGVvZiB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFycyAhPSAnc3RyaW5nJywKICAgICAgICAgIGluZGljYXRvcnMgPSBbXSwKICAgICAgICAgIGluZGljYXRvcjsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGlzLmluZGljYXRvcnMgPSBbXTsKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2Nyb2xsYmFycykgewogICAgICAgIC8vIFZlcnRpY2FsIHNjcm9sbGJhcgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2Nyb2xsWSkgewogICAgICAgICAgaW5kaWNhdG9yID0gewogICAgICAgICAgICBlbDogY3JlYXRlRGVmYXVsdFNjcm9sbGJhcigndicsIGludGVyYWN0aXZlLCB0aGlzLm9wdGlvbnMuc2Nyb2xsYmFycyksCiAgICAgICAgICAgIGludGVyYWN0aXZlOiBpbnRlcmFjdGl2ZSwKICAgICAgICAgICAgZGVmYXVsdFNjcm9sbGJhcnM6IHRydWUsCiAgICAgICAgICAgIGN1c3RvbVN0eWxlOiBjdXN0b21TdHlsZSwKICAgICAgICAgICAgcmVzaXplOiB0aGlzLm9wdGlvbnMucmVzaXplU2Nyb2xsYmFycywKICAgICAgICAgICAgc2hyaW5rOiB0aGlzLm9wdGlvbnMuc2hyaW5rU2Nyb2xsYmFycywKICAgICAgICAgICAgZmFkZTogdGhpcy5vcHRpb25zLmZhZGVTY3JvbGxiYXJzLAogICAgICAgICAgICBsaXN0ZW5YOiBmYWxzZQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZChpbmRpY2F0b3IuZWwpOwogICAgICAgICAgaW5kaWNhdG9ycy5wdXNoKGluZGljYXRvcik7CiAgICAgICAgfSAvLyBIb3Jpem9udGFsIHNjcm9sbGJhcgoKCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zY3JvbGxYKSB7CiAgICAgICAgICBpbmRpY2F0b3IgPSB7CiAgICAgICAgICAgIGVsOiBjcmVhdGVEZWZhdWx0U2Nyb2xsYmFyKCdoJywgaW50ZXJhY3RpdmUsIHRoaXMub3B0aW9ucy5zY3JvbGxiYXJzKSwKICAgICAgICAgICAgaW50ZXJhY3RpdmU6IGludGVyYWN0aXZlLAogICAgICAgICAgICBkZWZhdWx0U2Nyb2xsYmFyczogdHJ1ZSwKICAgICAgICAgICAgY3VzdG9tU3R5bGU6IGN1c3RvbVN0eWxlLAogICAgICAgICAgICByZXNpemU6IHRoaXMub3B0aW9ucy5yZXNpemVTY3JvbGxiYXJzLAogICAgICAgICAgICBzaHJpbms6IHRoaXMub3B0aW9ucy5zaHJpbmtTY3JvbGxiYXJzLAogICAgICAgICAgICBmYWRlOiB0aGlzLm9wdGlvbnMuZmFkZVNjcm9sbGJhcnMsCiAgICAgICAgICAgIGxpc3Rlblk6IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKGluZGljYXRvci5lbCk7CiAgICAgICAgICBpbmRpY2F0b3JzLnB1c2goaW5kaWNhdG9yKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykgewogICAgICAgIC8vIFRPRE86IGNoZWNrIGNvbmNhdCBjb21wYXRpYmlsaXR5CiAgICAgICAgaW5kaWNhdG9ycyA9IGluZGljYXRvcnMuY29uY2F0KHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IGluZGljYXRvcnMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgdGhpcy5pbmRpY2F0b3JzLnB1c2gobmV3IEluZGljYXRvcih0aGlzLCBpbmRpY2F0b3JzW2ldKSk7CiAgICAgIH0gLy8gVE9ETzogY2hlY2sgaWYgd2UgY2FuIHVzZSBhcnJheS5tYXAgKHdpZGUgY29tcGF0aWJpbGl0eSBhbmQgcGVyZm9ybWFuY2UgaXNzdWVzKQoKCiAgICAgIGZ1bmN0aW9uIF9pbmRpY2F0b3JzTWFwKGZuKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IHRoYXQuaW5kaWNhdG9ycy5sZW5ndGg7IGktLTspIHsKICAgICAgICAgIGZuLmNhbGwodGhhdC5pbmRpY2F0b3JzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmFkZVNjcm9sbGJhcnMpIHsKICAgICAgICB0aGlzLm9uKCdzY3JvbGxFbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfaW5kaWNhdG9yc01hcChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuZmFkZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5vbignc2Nyb2xsQ2FuY2VsJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgX2luZGljYXRvcnNNYXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmZhZGUoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMub24oJ3Njcm9sbFN0YXJ0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgX2luZGljYXRvcnNNYXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmZhZGUoMSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLm9uKCdiZWZvcmVTY3JvbGxTdGFydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF9pbmRpY2F0b3JzTWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mYWRlKDEsIHRydWUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMub24oJ3JlZnJlc2gnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX2luZGljYXRvcnNNYXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhpcy5yZWZyZXNoKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkgewogICAgICAgIF9pbmRpY2F0b3JzTWFwKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMuZGVzdHJveSgpOwogICAgICAgIH0pOwoKICAgICAgICBkZWxldGUgdGhpcy5pbmRpY2F0b3JzOwogICAgICB9KTsKICAgIH0sCiAgICBfaW5pdFdoZWVsOiBmdW5jdGlvbiBfaW5pdFdoZWVsKCkgewogICAgICB1dGlscy5hZGRFdmVudCh0aGlzLndyYXBwZXIsICd3aGVlbCcsIHRoaXMpOwogICAgICB1dGlscy5hZGRFdmVudCh0aGlzLndyYXBwZXIsICdtb3VzZXdoZWVsJywgdGhpcyk7CiAgICAgIHV0aWxzLmFkZEV2ZW50KHRoaXMud3JhcHBlciwgJ0RPTU1vdXNlU2Nyb2xsJywgdGhpcyk7CiAgICAgIHRoaXMub24oJ2Rlc3Ryb3knLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy53cmFwcGVyLCAnd2hlZWwnLCB0aGlzKTsKICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh0aGlzLndyYXBwZXIsICdtb3VzZXdoZWVsJywgdGhpcyk7CiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy53cmFwcGVyLCAnRE9NTW91c2VTY3JvbGwnLCB0aGlzKTsKICAgICAgfSk7CiAgICB9LAogICAgX3doZWVsOiBmdW5jdGlvbiBfd2hlZWwoZSkgewogICAgICBpZiAoIXRoaXMuZW5hYmxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB2YXIgd2hlZWxEZWx0YVgsCiAgICAgICAgICB3aGVlbERlbHRhWSwKICAgICAgICAgIG5ld1gsCiAgICAgICAgICBuZXdZLAogICAgICAgICAgdGhhdCA9IHRoaXM7CgogICAgICBpZiAodGhpcy53aGVlbFRpbWVvdXQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoYXQuX2V4ZWNFdmVudCgnc2Nyb2xsU3RhcnQnKTsKICAgICAgfSAvLyBFeGVjdXRlIHRoZSBzY3JvbGxFbmQgZXZlbnQgYWZ0ZXIgNDAwbXMgdGhlIHdoZWVsIHN0b3BwZWQgc2Nyb2xsaW5nCgoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMud2hlZWxUaW1lb3V0KTsKICAgICAgdGhpcy53aGVlbFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0Ll9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpOwoKICAgICAgICB0aGF0LndoZWVsVGltZW91dCA9IHVuZGVmaW5lZDsKICAgICAgfSwgNDAwKTsKCiAgICAgIGlmICgnZGVsdGFYJyBpbiBlKSB7CiAgICAgICAgd2hlZWxEZWx0YVggPSAtZS5kZWx0YVg7CiAgICAgICAgd2hlZWxEZWx0YVkgPSAtZS5kZWx0YVk7CiAgICAgIH0gZWxzZSBpZiAoJ3doZWVsRGVsdGFYJyBpbiBlKSB7CiAgICAgICAgd2hlZWxEZWx0YVggPSBlLndoZWVsRGVsdGFYIC8gMTIwICogdGhpcy5vcHRpb25zLm1vdXNlV2hlZWxTcGVlZDsKICAgICAgICB3aGVlbERlbHRhWSA9IGUud2hlZWxEZWx0YVkgLyAxMjAgKiB0aGlzLm9wdGlvbnMubW91c2VXaGVlbFNwZWVkOwogICAgICB9IGVsc2UgaWYgKCd3aGVlbERlbHRhJyBpbiBlKSB7CiAgICAgICAgd2hlZWxEZWx0YVggPSB3aGVlbERlbHRhWSA9IGUud2hlZWxEZWx0YSAvIDEyMCAqIHRoaXMub3B0aW9ucy5tb3VzZVdoZWVsU3BlZWQ7CiAgICAgIH0gZWxzZSBpZiAoJ2RldGFpbCcgaW4gZSkgewogICAgICAgIHdoZWVsRGVsdGFYID0gd2hlZWxEZWx0YVkgPSAtZS5kZXRhaWwgLyAzICogdGhpcy5vcHRpb25zLm1vdXNlV2hlZWxTcGVlZDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHdoZWVsRGVsdGFYICo9IHRoaXMub3B0aW9ucy5pbnZlcnRXaGVlbERpcmVjdGlvbjsKICAgICAgd2hlZWxEZWx0YVkgKj0gdGhpcy5vcHRpb25zLmludmVydFdoZWVsRGlyZWN0aW9uOwoKICAgICAgaWYgKCF0aGlzLmhhc1ZlcnRpY2FsU2Nyb2xsKSB7CiAgICAgICAgd2hlZWxEZWx0YVggPSB3aGVlbERlbHRhWTsKICAgICAgICB3aGVlbERlbHRhWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcCkgewogICAgICAgIG5ld1ggPSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYOwogICAgICAgIG5ld1kgPSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZOwoKICAgICAgICBpZiAod2hlZWxEZWx0YVggPiAwKSB7CiAgICAgICAgICBuZXdYLS07CiAgICAgICAgfSBlbHNlIGlmICh3aGVlbERlbHRhWCA8IDApIHsKICAgICAgICAgIG5ld1grKzsKICAgICAgICB9CgogICAgICAgIGlmICh3aGVlbERlbHRhWSA+IDApIHsKICAgICAgICAgIG5ld1ktLTsKICAgICAgICB9IGVsc2UgaWYgKHdoZWVsRGVsdGFZIDwgMCkgewogICAgICAgICAgbmV3WSsrOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5nb1RvUGFnZShuZXdYLCBuZXdZKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIG5ld1ggPSB0aGlzLnggKyBNYXRoLnJvdW5kKHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCA/IHdoZWVsRGVsdGFYIDogMCk7CiAgICAgIG5ld1kgPSB0aGlzLnkgKyBNYXRoLnJvdW5kKHRoaXMuaGFzVmVydGljYWxTY3JvbGwgPyB3aGVlbERlbHRhWSA6IDApOwoKICAgICAgaWYgKG5ld1ggPiAwKSB7CiAgICAgICAgbmV3WCA9IDA7CiAgICAgIH0gZWxzZSBpZiAobmV3WCA8IHRoaXMubWF4U2Nyb2xsWCkgewogICAgICAgIG5ld1ggPSB0aGlzLm1heFNjcm9sbFg7CiAgICAgIH0KCiAgICAgIGlmIChuZXdZID4gMCkgewogICAgICAgIG5ld1kgPSAwOwogICAgICB9IGVsc2UgaWYgKG5ld1kgPCB0aGlzLm1heFNjcm9sbFkpIHsKICAgICAgICBuZXdZID0gdGhpcy5tYXhTY3JvbGxZOwogICAgICB9CgogICAgICB0aGlzLnNjcm9sbFRvKG5ld1gsIG5ld1ksIDApOwoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcm9iZVR5cGUgPiAxKSB7CiAgICAgICAgdGhpcy5fZXhlY0V2ZW50KCdzY3JvbGwnKTsKICAgICAgfSAvLyBJTlNFUlQgUE9JTlQ6IF93aGVlbAoKICAgIH0sCiAgICBfaW5pdFNuYXA6IGZ1bmN0aW9uIF9pbml0U25hcCgpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHt9OwoKICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuc25hcCA9PSAnc3RyaW5nJykgewogICAgICAgIHRoaXMub3B0aW9ucy5zbmFwID0gdGhpcy5zY3JvbGxlci5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5zbmFwKTsKICAgICAgfQoKICAgICAgdGhpcy5vbigncmVmcmVzaCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaSA9IDAsCiAgICAgICAgICAgIGwsCiAgICAgICAgICAgIG0gPSAwLAogICAgICAgICAgICBuLAogICAgICAgICAgICBjeCwKICAgICAgICAgICAgY3ksCiAgICAgICAgICAgIHggPSAwLAogICAgICAgICAgICB5LAogICAgICAgICAgICBzdGVwWCA9IHRoaXMub3B0aW9ucy5zbmFwU3RlcFggfHwgdGhpcy53cmFwcGVyV2lkdGgsCiAgICAgICAgICAgIHN0ZXBZID0gdGhpcy5vcHRpb25zLnNuYXBTdGVwWSB8fCB0aGlzLndyYXBwZXJIZWlnaHQsCiAgICAgICAgICAgIGVsOwogICAgICAgIHRoaXMucGFnZXMgPSBbXTsKCiAgICAgICAgaWYgKCF0aGlzLndyYXBwZXJXaWR0aCB8fCAhdGhpcy53cmFwcGVySGVpZ2h0IHx8ICF0aGlzLnNjcm9sbGVyV2lkdGggfHwgIXRoaXMuc2Nyb2xsZXJIZWlnaHQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcCA9PT0gdHJ1ZSkgewogICAgICAgICAgY3ggPSBNYXRoLnJvdW5kKHN0ZXBYIC8gMik7CiAgICAgICAgICBjeSA9IE1hdGgucm91bmQoc3RlcFkgLyAyKTsKCiAgICAgICAgICB3aGlsZSAoeCA+IC10aGlzLnNjcm9sbGVyV2lkdGgpIHsKICAgICAgICAgICAgdGhpcy5wYWdlc1tpXSA9IFtdOwogICAgICAgICAgICBsID0gMDsKICAgICAgICAgICAgeSA9IDA7CgogICAgICAgICAgICB3aGlsZSAoeSA+IC10aGlzLnNjcm9sbGVySGVpZ2h0KSB7CiAgICAgICAgICAgICAgdGhpcy5wYWdlc1tpXVtsXSA9IHsKICAgICAgICAgICAgICAgIHg6IE1hdGgubWF4KHgsIHRoaXMubWF4U2Nyb2xsWCksCiAgICAgICAgICAgICAgICB5OiBNYXRoLm1heCh5LCB0aGlzLm1heFNjcm9sbFkpLAogICAgICAgICAgICAgICAgd2lkdGg6IHN0ZXBYLAogICAgICAgICAgICAgICAgaGVpZ2h0OiBzdGVwWSwKICAgICAgICAgICAgICAgIGN4OiB4IC0gY3gsCiAgICAgICAgICAgICAgICBjeTogeSAtIGN5CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB5IC09IHN0ZXBZOwogICAgICAgICAgICAgIGwrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgeCAtPSBzdGVwWDsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbCA9IHRoaXMub3B0aW9ucy5zbmFwOwogICAgICAgICAgbCA9IGVsLmxlbmd0aDsKICAgICAgICAgIG4gPSAtMTsKCiAgICAgICAgICBmb3IgKDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBlbFtpXS5vZmZzZXRMZWZ0IDw9IGVsW2kgLSAxXS5vZmZzZXRMZWZ0KSB7CiAgICAgICAgICAgICAgbSA9IDA7CiAgICAgICAgICAgICAgbisrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXRoaXMucGFnZXNbbV0pIHsKICAgICAgICAgICAgICB0aGlzLnBhZ2VzW21dID0gW107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHggPSBNYXRoLm1heCgtZWxbaV0ub2Zmc2V0TGVmdCwgdGhpcy5tYXhTY3JvbGxYKTsKICAgICAgICAgICAgeSA9IE1hdGgubWF4KC1lbFtpXS5vZmZzZXRUb3AsIHRoaXMubWF4U2Nyb2xsWSk7CiAgICAgICAgICAgIGN4ID0geCAtIE1hdGgucm91bmQoZWxbaV0ub2Zmc2V0V2lkdGggLyAyKTsKICAgICAgICAgICAgY3kgPSB5IC0gTWF0aC5yb3VuZChlbFtpXS5vZmZzZXRIZWlnaHQgLyAyKTsKICAgICAgICAgICAgdGhpcy5wYWdlc1ttXVtuXSA9IHsKICAgICAgICAgICAgICB4OiB4LAogICAgICAgICAgICAgIHk6IHksCiAgICAgICAgICAgICAgd2lkdGg6IGVsW2ldLm9mZnNldFdpZHRoLAogICAgICAgICAgICAgIGhlaWdodDogZWxbaV0ub2Zmc2V0SGVpZ2h0LAogICAgICAgICAgICAgIGN4OiBjeCwKICAgICAgICAgICAgICBjeTogY3kKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmICh4ID4gdGhpcy5tYXhTY3JvbGxYKSB7CiAgICAgICAgICAgICAgbSsrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLmdvVG9QYWdlKHRoaXMuY3VycmVudFBhZ2UucGFnZVggfHwgMCwgdGhpcy5jdXJyZW50UGFnZS5wYWdlWSB8fCAwLCAwKTsgLy8gVXBkYXRlIHNuYXAgdGhyZXNob2xkIGlmIG5lZWRlZAoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQgJSAxID09PSAwKSB7CiAgICAgICAgICB0aGlzLnNuYXBUaHJlc2hvbGRYID0gdGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQ7CiAgICAgICAgICB0aGlzLnNuYXBUaHJlc2hvbGRZID0gdGhpcy5vcHRpb25zLnNuYXBUaHJlc2hvbGQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc25hcFRocmVzaG9sZFggPSBNYXRoLnJvdW5kKHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZS5wYWdlWF1bdGhpcy5jdXJyZW50UGFnZS5wYWdlWV0ud2lkdGggKiB0aGlzLm9wdGlvbnMuc25hcFRocmVzaG9sZCk7CiAgICAgICAgICB0aGlzLnNuYXBUaHJlc2hvbGRZID0gTWF0aC5yb3VuZCh0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2UucGFnZVhdW3RoaXMuY3VycmVudFBhZ2UucGFnZVldLmhlaWdodCAqIHRoaXMub3B0aW9ucy5zbmFwVGhyZXNob2xkKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLm9uKCdmbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdGltZSA9IHRoaXMub3B0aW9ucy5zbmFwU3BlZWQgfHwgTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4oTWF0aC5hYnModGhpcy54IC0gdGhpcy5zdGFydFgpLCAxMDAwKSwgTWF0aC5taW4oTWF0aC5hYnModGhpcy55IC0gdGhpcy5zdGFydFkpLCAxMDAwKSksIDMwMCk7CiAgICAgICAgdGhpcy5nb1RvUGFnZSh0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYICsgdGhpcy5kaXJlY3Rpb25YLCB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VZICsgdGhpcy5kaXJlY3Rpb25ZLCB0aW1lKTsKICAgICAgfSk7CiAgICB9LAogICAgX25lYXJlc3RTbmFwOiBmdW5jdGlvbiBfbmVhcmVzdFNuYXAoeCwgeSkgewogICAgICBpZiAoIXRoaXMucGFnZXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwLAogICAgICAgICAgcGFnZVg6IDAsCiAgICAgICAgICBwYWdlWTogMAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBpID0gMCwKICAgICAgICAgIGwgPSB0aGlzLnBhZ2VzLmxlbmd0aCwKICAgICAgICAgIG0gPSAwOyAvLyBDaGVjayBpZiB3ZSBleGNlZWRlZCB0aGUgc25hcCB0aHJlc2hvbGQKCiAgICAgIGlmIChNYXRoLmFicyh4IC0gdGhpcy5hYnNTdGFydFgpIDwgdGhpcy5zbmFwVGhyZXNob2xkWCAmJiBNYXRoLmFicyh5IC0gdGhpcy5hYnNTdGFydFkpIDwgdGhpcy5zbmFwVGhyZXNob2xkWSkgewogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQYWdlOwogICAgICB9CgogICAgICBpZiAoeCA+IDApIHsKICAgICAgICB4ID0gMDsKICAgICAgfSBlbHNlIGlmICh4IDwgdGhpcy5tYXhTY3JvbGxYKSB7CiAgICAgICAgeCA9IHRoaXMubWF4U2Nyb2xsWDsKICAgICAgfQoKICAgICAgaWYgKHkgPiAwKSB7CiAgICAgICAgeSA9IDA7CiAgICAgIH0gZWxzZSBpZiAoeSA8IHRoaXMubWF4U2Nyb2xsWSkgewogICAgICAgIHkgPSB0aGlzLm1heFNjcm9sbFk7CiAgICAgIH0KCiAgICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgaWYgKHggPj0gdGhpcy5wYWdlc1tpXVswXS5jeCkgewogICAgICAgICAgeCA9IHRoaXMucGFnZXNbaV1bMF0ueDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbCA9IHRoaXMucGFnZXNbaV0ubGVuZ3RoOwoKICAgICAgZm9yICg7IG0gPCBsOyBtKyspIHsKICAgICAgICBpZiAoeSA+PSB0aGlzLnBhZ2VzWzBdW21dLmN5KSB7CiAgICAgICAgICB5ID0gdGhpcy5wYWdlc1swXVttXS55OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoaSA9PSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYKSB7CiAgICAgICAgaSArPSB0aGlzLmRpcmVjdGlvblg7CgogICAgICAgIGlmIChpIDwgMCkgewogICAgICAgICAgaSA9IDA7CiAgICAgICAgfSBlbHNlIGlmIChpID49IHRoaXMucGFnZXMubGVuZ3RoKSB7CiAgICAgICAgICBpID0gdGhpcy5wYWdlcy5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgeCA9IHRoaXMucGFnZXNbaV1bMF0ueDsKICAgICAgfQoKICAgICAgaWYgKG0gPT0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWSkgewogICAgICAgIG0gKz0gdGhpcy5kaXJlY3Rpb25ZOwoKICAgICAgICBpZiAobSA8IDApIHsKICAgICAgICAgIG0gPSAwOwogICAgICAgIH0gZWxzZSBpZiAobSA+PSB0aGlzLnBhZ2VzWzBdLmxlbmd0aCkgewogICAgICAgICAgbSA9IHRoaXMucGFnZXNbMF0ubGVuZ3RoIC0gMTsKICAgICAgICB9CgogICAgICAgIHkgPSB0aGlzLnBhZ2VzWzBdW21dLnk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgeDogeCwKICAgICAgICB5OiB5LAogICAgICAgIHBhZ2VYOiBpLAogICAgICAgIHBhZ2VZOiBtCiAgICAgIH07CiAgICB9LAogICAgZ29Ub1BhZ2U6IGZ1bmN0aW9uIGdvVG9QYWdlKHgsIHksIHRpbWUsIGVhc2luZykgewogICAgICBlYXNpbmcgPSBlYXNpbmcgfHwgdGhpcy5vcHRpb25zLmJvdW5jZUVhc2luZzsKCiAgICAgIGlmICh4ID49IHRoaXMucGFnZXMubGVuZ3RoKSB7CiAgICAgICAgeCA9IHRoaXMucGFnZXMubGVuZ3RoIC0gMTsKICAgICAgfSBlbHNlIGlmICh4IDwgMCkgewogICAgICAgIHggPSAwOwogICAgICB9CgogICAgICBpZiAoeSA+PSB0aGlzLnBhZ2VzW3hdLmxlbmd0aCkgewogICAgICAgIHkgPSB0aGlzLnBhZ2VzW3hdLmxlbmd0aCAtIDE7CiAgICAgIH0gZWxzZSBpZiAoeSA8IDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgdmFyIHBvc1ggPSB0aGlzLnBhZ2VzW3hdW3ldLngsCiAgICAgICAgICBwb3NZID0gdGhpcy5wYWdlc1t4XVt5XS55OwogICAgICB0aW1lID0gdGltZSA9PT0gdW5kZWZpbmVkID8gdGhpcy5vcHRpb25zLnNuYXBTcGVlZCB8fCBNYXRoLm1heChNYXRoLm1heChNYXRoLm1pbihNYXRoLmFicyhwb3NYIC0gdGhpcy54KSwgMTAwMCksIE1hdGgubWluKE1hdGguYWJzKHBvc1kgLSB0aGlzLnkpLCAxMDAwKSksIDMwMCkgOiB0aW1lOwogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gewogICAgICAgIHg6IHBvc1gsCiAgICAgICAgeTogcG9zWSwKICAgICAgICBwYWdlWDogeCwKICAgICAgICBwYWdlWTogeQogICAgICB9OwogICAgICB0aGlzLnNjcm9sbFRvKHBvc1gsIHBvc1ksIHRpbWUsIGVhc2luZyk7CiAgICB9LAogICAgbmV4dDogZnVuY3Rpb24gbmV4dCh0aW1lLCBlYXNpbmcpIHsKICAgICAgdmFyIHggPSB0aGlzLmN1cnJlbnRQYWdlLnBhZ2VYLAogICAgICAgICAgeSA9IHRoaXMuY3VycmVudFBhZ2UucGFnZVk7CiAgICAgIHgrKzsKCiAgICAgIGlmICh4ID49IHRoaXMucGFnZXMubGVuZ3RoICYmIHRoaXMuaGFzVmVydGljYWxTY3JvbGwpIHsKICAgICAgICB4ID0gMDsKICAgICAgICB5Kys7CiAgICAgIH0KCiAgICAgIHRoaXMuZ29Ub1BhZ2UoeCwgeSwgdGltZSwgZWFzaW5nKTsKICAgIH0sCiAgICBwcmV2OiBmdW5jdGlvbiBwcmV2KHRpbWUsIGVhc2luZykgewogICAgICB2YXIgeCA9IHRoaXMuY3VycmVudFBhZ2UucGFnZVgsCiAgICAgICAgICB5ID0gdGhpcy5jdXJyZW50UGFnZS5wYWdlWTsKICAgICAgeC0tOwoKICAgICAgaWYgKHggPCAwICYmIHRoaXMuaGFzVmVydGljYWxTY3JvbGwpIHsKICAgICAgICB4ID0gMDsKICAgICAgICB5LS07CiAgICAgIH0KCiAgICAgIHRoaXMuZ29Ub1BhZ2UoeCwgeSwgdGltZSwgZWFzaW5nKTsKICAgIH0sCiAgICBfaW5pdEtleXM6IGZ1bmN0aW9uIF9pbml0S2V5cyhlKSB7CiAgICAgIC8vIGRlZmF1bHQga2V5IGJpbmRpbmdzCiAgICAgIHZhciBrZXlzID0gewogICAgICAgIHBhZ2VVcDogMzMsCiAgICAgICAgcGFnZURvd246IDM0LAogICAgICAgIGVuZDogMzUsCiAgICAgICAgaG9tZTogMzYsCiAgICAgICAgbGVmdDogMzcsCiAgICAgICAgdXA6IDM4LAogICAgICAgIHJpZ2h0OiAzOSwKICAgICAgICBkb3duOiA0MAogICAgICB9OwogICAgICB2YXIgaTsgLy8gaWYgeW91IGdpdmUgbWUgY2hhcmFjdGVycyBJIGdpdmUgeW91IGtleWNvZGUKCiAgICAgIGlmIChfdHlwZW9mKHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncykgPT0gJ29iamVjdCcpIHsKICAgICAgICBmb3IgKGkgaW4gdGhpcy5vcHRpb25zLmtleUJpbmRpbmdzKSB7CiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5nc1tpXSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0gPSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0udG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MgPSB7fTsKICAgICAgfQoKICAgICAgZm9yIChpIGluIGtleXMpIHsKICAgICAgICB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0gPSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3NbaV0gfHwga2V5c1tpXTsKICAgICAgfQoKICAgICAgdXRpbHMuYWRkRXZlbnQod2luZG93LCAna2V5ZG93bicsIHRoaXMpOwogICAgICB0aGlzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkgewogICAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgJ2tleWRvd24nLCB0aGlzKTsKICAgICAgfSk7CiAgICB9LAogICAgX2tleTogZnVuY3Rpb24gX2tleShlKSB7CiAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc25hcCA9IHRoaXMub3B0aW9ucy5zbmFwLAogICAgICAgICAgLy8gd2UgYXJlIHVzaW5nIHRoaXMgYWxvdCwgYmV0dGVyIHRvIGNhY2hlIGl0CiAgICAgIG5ld1ggPSBzbmFwID8gdGhpcy5jdXJyZW50UGFnZS5wYWdlWCA6IHRoaXMueCwKICAgICAgICAgIG5ld1kgPSBzbmFwID8gdGhpcy5jdXJyZW50UGFnZS5wYWdlWSA6IHRoaXMueSwKICAgICAgICAgIG5vdyA9IHV0aWxzLmdldFRpbWUoKSwKICAgICAgICAgIHByZXZUaW1lID0gdGhpcy5rZXlUaW1lIHx8IDAsCiAgICAgICAgICBhY2NlbGVyYXRpb24gPSAwLjI1MCwKICAgICAgICAgIHBvczsKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlVHJhbnNpdGlvbiAmJiB0aGlzLmlzSW5UcmFuc2l0aW9uKSB7CiAgICAgICAgcG9zID0gdGhpcy5nZXRDb21wdXRlZFBvc2l0aW9uKCk7CgogICAgICAgIHRoaXMuX3RyYW5zbGF0ZShNYXRoLnJvdW5kKHBvcy54KSwgTWF0aC5yb3VuZChwb3MueSkpOwoKICAgICAgICB0aGlzLmlzSW5UcmFuc2l0aW9uID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMua2V5QWNjZWxlcmF0aW9uID0gbm93IC0gcHJldlRpbWUgPCAyMDAgPyBNYXRoLm1pbih0aGlzLmtleUFjY2VsZXJhdGlvbiArIGFjY2VsZXJhdGlvbiwgNTApIDogMDsKCiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7CiAgICAgICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MucGFnZVVwOgogICAgICAgICAgaWYgKHRoaXMuaGFzSG9yaXpvbnRhbFNjcm9sbCAmJiAhdGhpcy5oYXNWZXJ0aWNhbFNjcm9sbCkgewogICAgICAgICAgICBuZXdYICs9IHNuYXAgPyAxIDogdGhpcy53cmFwcGVyV2lkdGg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdZICs9IHNuYXAgPyAxIDogdGhpcy53cmFwcGVySGVpZ2h0OwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5wYWdlRG93bjoKICAgICAgICAgIGlmICh0aGlzLmhhc0hvcml6b250YWxTY3JvbGwgJiYgIXRoaXMuaGFzVmVydGljYWxTY3JvbGwpIHsKICAgICAgICAgICAgbmV3WCAtPSBzbmFwID8gMSA6IHRoaXMud3JhcHBlcldpZHRoOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3WSAtPSBzbmFwID8gMSA6IHRoaXMud3JhcHBlckhlaWdodDsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MuZW5kOgogICAgICAgICAgbmV3WCA9IHNuYXAgPyB0aGlzLnBhZ2VzLmxlbmd0aCAtIDEgOiB0aGlzLm1heFNjcm9sbFg7CiAgICAgICAgICBuZXdZID0gc25hcCA/IHRoaXMucGFnZXNbMF0ubGVuZ3RoIC0gMSA6IHRoaXMubWF4U2Nyb2xsWTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5ob21lOgogICAgICAgICAgbmV3WCA9IDA7CiAgICAgICAgICBuZXdZID0gMDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5sZWZ0OgogICAgICAgICAgbmV3WCArPSBzbmFwID8gLTEgOiA1ICsgdGhpcy5rZXlBY2NlbGVyYXRpb24gPj4gMDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy51cDoKICAgICAgICAgIG5ld1kgKz0gc25hcCA/IDEgOiA1ICsgdGhpcy5rZXlBY2NlbGVyYXRpb24gPj4gMDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIHRoaXMub3B0aW9ucy5rZXlCaW5kaW5ncy5yaWdodDoKICAgICAgICAgIG5ld1ggLT0gc25hcCA/IC0xIDogNSArIHRoaXMua2V5QWNjZWxlcmF0aW9uID4+IDA7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSB0aGlzLm9wdGlvbnMua2V5QmluZGluZ3MuZG93bjoKICAgICAgICAgIG5ld1kgLT0gc25hcCA/IDEgOiA1ICsgdGhpcy5rZXlBY2NlbGVyYXRpb24gPj4gMDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc25hcCkgewogICAgICAgIHRoaXMuZ29Ub1BhZ2UobmV3WCwgbmV3WSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAobmV3WCA+IDApIHsKICAgICAgICBuZXdYID0gMDsKICAgICAgICB0aGlzLmtleUFjY2VsZXJhdGlvbiA9IDA7CiAgICAgIH0gZWxzZSBpZiAobmV3WCA8IHRoaXMubWF4U2Nyb2xsWCkgewogICAgICAgIG5ld1ggPSB0aGlzLm1heFNjcm9sbFg7CiAgICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwOwogICAgICB9CgogICAgICBpZiAobmV3WSA+IDApIHsKICAgICAgICBuZXdZID0gMDsKICAgICAgICB0aGlzLmtleUFjY2VsZXJhdGlvbiA9IDA7CiAgICAgIH0gZWxzZSBpZiAobmV3WSA8IHRoaXMubWF4U2Nyb2xsWSkgewogICAgICAgIG5ld1kgPSB0aGlzLm1heFNjcm9sbFk7CiAgICAgICAgdGhpcy5rZXlBY2NlbGVyYXRpb24gPSAwOwogICAgICB9CgogICAgICB0aGlzLnNjcm9sbFRvKG5ld1gsIG5ld1ksIDApOwogICAgICB0aGlzLmtleVRpbWUgPSBub3c7CiAgICB9LAogICAgX2FuaW1hdGU6IGZ1bmN0aW9uIF9hbmltYXRlKGRlc3RYLCBkZXN0WSwgZHVyYXRpb24sIGVhc2luZ0ZuKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpcywKICAgICAgICAgIHN0YXJ0WCA9IHRoaXMueCwKICAgICAgICAgIHN0YXJ0WSA9IHRoaXMueSwKICAgICAgICAgIHN0YXJ0VGltZSA9IHV0aWxzLmdldFRpbWUoKSwKICAgICAgICAgIGRlc3RUaW1lID0gc3RhcnRUaW1lICsgZHVyYXRpb247CgogICAgICBmdW5jdGlvbiBzdGVwKCkgewogICAgICAgIHZhciBub3cgPSB1dGlscy5nZXRUaW1lKCksCiAgICAgICAgICAgIG5ld1gsCiAgICAgICAgICAgIG5ld1ksCiAgICAgICAgICAgIGVhc2luZzsKCiAgICAgICAgaWYgKG5vdyA+PSBkZXN0VGltZSkgewogICAgICAgICAgdGhhdC5pc0FuaW1hdGluZyA9IGZhbHNlOwoKICAgICAgICAgIHRoYXQuX3RyYW5zbGF0ZShkZXN0WCwgZGVzdFkpOwoKICAgICAgICAgIGlmICghdGhhdC5yZXNldFBvc2l0aW9uKHRoYXQub3B0aW9ucy5ib3VuY2VUaW1lKSkgewogICAgICAgICAgICB0aGF0Ll9leGVjRXZlbnQoJ3Njcm9sbEVuZCcpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIG5vdyA9IChub3cgLSBzdGFydFRpbWUpIC8gZHVyYXRpb247CiAgICAgICAgZWFzaW5nID0gZWFzaW5nRm4obm93KTsKICAgICAgICBuZXdYID0gKGRlc3RYIC0gc3RhcnRYKSAqIGVhc2luZyArIHN0YXJ0WDsKICAgICAgICBuZXdZID0gKGRlc3RZIC0gc3RhcnRZKSAqIGVhc2luZyArIHN0YXJ0WTsKCiAgICAgICAgdGhhdC5fdHJhbnNsYXRlKG5ld1gsIG5ld1kpOwoKICAgICAgICBpZiAodGhhdC5pc0FuaW1hdGluZykgewogICAgICAgICAgckFGKHN0ZXApOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5wcm9iZVR5cGUgPT0gMykgewogICAgICAgICAgdGhhdC5fZXhlY0V2ZW50KCdzY3JvbGwnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlOwogICAgICBzdGVwKCk7CiAgICB9LAogICAgaGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGUpIHsKICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICBjYXNlICd0b3VjaHN0YXJ0JzoKICAgICAgICBjYXNlICdwb2ludGVyZG93bic6CiAgICAgICAgY2FzZSAnTVNQb2ludGVyRG93bic6CiAgICAgICAgY2FzZSAnbW91c2Vkb3duJzoKICAgICAgICAgIHRoaXMuX3N0YXJ0KGUpOwoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICd0b3VjaG1vdmUnOgogICAgICAgIGNhc2UgJ3BvaW50ZXJtb3ZlJzoKICAgICAgICBjYXNlICdNU1BvaW50ZXJNb3ZlJzoKICAgICAgICBjYXNlICdtb3VzZW1vdmUnOgogICAgICAgICAgdGhpcy5fbW92ZShlKTsKCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAndG91Y2hlbmQnOgogICAgICAgIGNhc2UgJ3BvaW50ZXJ1cCc6CiAgICAgICAgY2FzZSAnTVNQb2ludGVyVXAnOgogICAgICAgIGNhc2UgJ21vdXNldXAnOgogICAgICAgIGNhc2UgJ3RvdWNoY2FuY2VsJzoKICAgICAgICBjYXNlICdwb2ludGVyY2FuY2VsJzoKICAgICAgICBjYXNlICdNU1BvaW50ZXJDYW5jZWwnOgogICAgICAgIGNhc2UgJ21vdXNlY2FuY2VsJzoKICAgICAgICAgIHRoaXMuX2VuZChlKTsKCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnb3JpZW50YXRpb25jaGFuZ2UnOgogICAgICAgIGNhc2UgJ3Jlc2l6ZSc6CiAgICAgICAgICB0aGlzLl9yZXNpemUoKTsKCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAndHJhbnNpdGlvbmVuZCc6CiAgICAgICAgY2FzZSAnd2Via2l0VHJhbnNpdGlvbkVuZCc6CiAgICAgICAgY2FzZSAnb1RyYW5zaXRpb25FbmQnOgogICAgICAgIGNhc2UgJ01TVHJhbnNpdGlvbkVuZCc6CiAgICAgICAgICB0aGlzLl90cmFuc2l0aW9uRW5kKGUpOwoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICd3aGVlbCc6CiAgICAgICAgY2FzZSAnRE9NTW91c2VTY3JvbGwnOgogICAgICAgIGNhc2UgJ21vdXNld2hlZWwnOgogICAgICAgICAgdGhpcy5fd2hlZWwoZSk7CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ2tleWRvd24nOgogICAgICAgICAgdGhpcy5fa2V5KGUpOwoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdjbGljayc6CiAgICAgICAgICBpZiAoIWUuX2NvbnN0cnVjdGVkKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRTY3JvbGxiYXIoZGlyZWN0aW9uLCBpbnRlcmFjdGl2ZSwgdHlwZSkgewogICAgdmFyIHNjcm9sbGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLAogICAgICAgIGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoKICAgIGlmICh0eXBlID09PSB0cnVlKSB7CiAgICAgIHNjcm9sbGJhci5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6OTk5OSc7CiAgICAgIGluZGljYXRvci5zdHlsZS5jc3NUZXh0ID0gJy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC45KTtib3JkZXItcmFkaXVzOjNweCc7CiAgICB9CgogICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICdpU2Nyb2xsSW5kaWNhdG9yJzsKCiAgICBpZiAoZGlyZWN0aW9uID09ICdoJykgewogICAgICBpZiAodHlwZSA9PT0gdHJ1ZSkgewogICAgICAgIHNjcm9sbGJhci5zdHlsZS5jc3NUZXh0ICs9ICc7aGVpZ2h0OjdweDtsZWZ0OjJweDtyaWdodDoycHg7Ym90dG9tOjAnOwogICAgICAgIGluZGljYXRvci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7CiAgICAgIH0KCiAgICAgIHNjcm9sbGJhci5jbGFzc05hbWUgPSAnaVNjcm9sbEhvcml6b250YWxTY3JvbGxiYXInOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHR5cGUgPT09IHRydWUpIHsKICAgICAgICBzY3JvbGxiYXIuc3R5bGUuY3NzVGV4dCArPSAnO3dpZHRoOjdweDtib3R0b206MnB4O3RvcDoycHg7cmlnaHQ6MXB4JzsKICAgICAgICBpbmRpY2F0b3Iuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgIH0KCiAgICAgIHNjcm9sbGJhci5jbGFzc05hbWUgPSAnaVNjcm9sbFZlcnRpY2FsU2Nyb2xsYmFyJzsKICAgIH0KCiAgICBzY3JvbGxiYXIuc3R5bGUuY3NzVGV4dCArPSAnO292ZXJmbG93OmhpZGRlbic7CgogICAgaWYgKCFpbnRlcmFjdGl2ZSkgewogICAgICBzY3JvbGxiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJzsKICAgIH0KCiAgICBzY3JvbGxiYXIuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yKTsKICAgIHJldHVybiBzY3JvbGxiYXI7CiAgfQoKICBmdW5jdGlvbiBJbmRpY2F0b3Ioc2Nyb2xsZXIsIG9wdGlvbnMpIHsKICAgIHRoaXMud3JhcHBlciA9IHR5cGVvZiBvcHRpb25zLmVsID09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmVsKSA6IG9wdGlvbnMuZWw7CiAgICB0aGlzLndyYXBwZXJTdHlsZSA9IHRoaXMud3JhcHBlci5zdHlsZTsKICAgIHRoaXMuaW5kaWNhdG9yID0gdGhpcy53cmFwcGVyLmNoaWxkcmVuWzBdOwogICAgdGhpcy5pbmRpY2F0b3JTdHlsZSA9IHRoaXMuaW5kaWNhdG9yLnN0eWxlOwogICAgdGhpcy5zY3JvbGxlciA9IHNjcm9sbGVyOwogICAgdGhpcy5vcHRpb25zID0gewogICAgICBsaXN0ZW5YOiB0cnVlLAogICAgICBsaXN0ZW5ZOiB0cnVlLAogICAgICBpbnRlcmFjdGl2ZTogZmFsc2UsCiAgICAgIHJlc2l6ZTogdHJ1ZSwKICAgICAgZGVmYXVsdFNjcm9sbGJhcnM6IGZhbHNlLAogICAgICBzaHJpbms6IGZhbHNlLAogICAgICBmYWRlOiBmYWxzZSwKICAgICAgc3BlZWRSYXRpb1g6IDAsCiAgICAgIHNwZWVkUmF0aW9ZOiAwCiAgICB9OwoKICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucykgewogICAgICB0aGlzLm9wdGlvbnNbaV0gPSBvcHRpb25zW2ldOwogICAgfQoKICAgIHRoaXMuc2l6ZVJhdGlvWCA9IDE7CiAgICB0aGlzLnNpemVSYXRpb1kgPSAxOwogICAgdGhpcy5tYXhQb3NYID0gMDsKICAgIHRoaXMubWF4UG9zWSA9IDA7CgogICAgaWYgKHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZSkgewogICAgICBpZiAoIXRoaXMub3B0aW9ucy5kaXNhYmxlVG91Y2gpIHsKICAgICAgICB1dGlscy5hZGRFdmVudCh0aGlzLmluZGljYXRvciwgJ3RvdWNoc3RhcnQnLCB0aGlzKTsKICAgICAgICB1dGlscy5hZGRFdmVudCh3aW5kb3csICd0b3VjaGVuZCcsIHRoaXMpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMub3B0aW9ucy5kaXNhYmxlUG9pbnRlcikgewogICAgICAgIHV0aWxzLmFkZEV2ZW50KHRoaXMuaW5kaWNhdG9yLCB1dGlscy5wcmVmaXhQb2ludGVyRXZlbnQoJ3BvaW50ZXJkb3duJyksIHRoaXMpOwogICAgICAgIHV0aWxzLmFkZEV2ZW50KHdpbmRvdywgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVydXAnKSwgdGhpcyk7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpc2FibGVNb3VzZSkgewogICAgICAgIHV0aWxzLmFkZEV2ZW50KHRoaXMuaW5kaWNhdG9yLCAnbW91c2Vkb3duJywgdGhpcyk7CiAgICAgICAgdXRpbHMuYWRkRXZlbnQod2luZG93LCAnbW91c2V1cCcsIHRoaXMpOwogICAgICB9CiAgICB9CgogICAgaWYgKHRoaXMub3B0aW9ucy5mYWRlKSB7CiAgICAgIHRoaXMud3JhcHBlclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zZm9ybV0gPSB0aGlzLnNjcm9sbGVyLnRyYW5zbGF0ZVo7CiAgICAgIHRoaXMud3JhcHBlclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbl0gPSB1dGlscy5pc0JhZEFuZHJvaWQgPyAnMC4wMDFzJyA6ICcwbXMnOwogICAgICB0aGlzLndyYXBwZXJTdHlsZS5vcGFjaXR5ID0gJzAnOwogICAgfQogIH0KCiAgSW5kaWNhdG9yLnByb3RvdHlwZSA9IHsKICAgIGhhbmRsZUV2ZW50OiBmdW5jdGlvbiBoYW5kbGVFdmVudChlKSB7CiAgICAgIHN3aXRjaCAoZS50eXBlKSB7CiAgICAgICAgY2FzZSAndG91Y2hzdGFydCc6CiAgICAgICAgY2FzZSAncG9pbnRlcmRvd24nOgogICAgICAgIGNhc2UgJ01TUG9pbnRlckRvd24nOgogICAgICAgIGNhc2UgJ21vdXNlZG93bic6CiAgICAgICAgICB0aGlzLl9zdGFydChlKTsKCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAndG91Y2htb3ZlJzoKICAgICAgICBjYXNlICdwb2ludGVybW92ZSc6CiAgICAgICAgY2FzZSAnTVNQb2ludGVyTW92ZSc6CiAgICAgICAgY2FzZSAnbW91c2Vtb3ZlJzoKICAgICAgICAgIHRoaXMuX21vdmUoZSk7CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ3RvdWNoZW5kJzoKICAgICAgICBjYXNlICdwb2ludGVydXAnOgogICAgICAgIGNhc2UgJ01TUG9pbnRlclVwJzoKICAgICAgICBjYXNlICdtb3VzZXVwJzoKICAgICAgICBjYXNlICd0b3VjaGNhbmNlbCc6CiAgICAgICAgY2FzZSAncG9pbnRlcmNhbmNlbCc6CiAgICAgICAgY2FzZSAnTVNQb2ludGVyQ2FuY2VsJzoKICAgICAgICBjYXNlICdtb3VzZWNhbmNlbCc6CiAgICAgICAgICB0aGlzLl9lbmQoZSk7CgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkgewogICAgICBpZiAodGhpcy5vcHRpb25zLmludGVyYWN0aXZlKSB7CiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy5pbmRpY2F0b3IsICd0b3VjaHN0YXJ0JywgdGhpcyk7CiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy5pbmRpY2F0b3IsIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcmRvd24nKSwgdGhpcyk7CiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQodGhpcy5pbmRpY2F0b3IsICdtb3VzZWRvd24nLCB0aGlzKTsKICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csICd0b3VjaG1vdmUnLCB0aGlzKTsKICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcm1vdmUnKSwgdGhpcyk7CiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAnbW91c2Vtb3ZlJywgdGhpcyk7CiAgICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAndG91Y2hlbmQnLCB0aGlzKTsKICAgICAgICB1dGlscy5yZW1vdmVFdmVudCh3aW5kb3csIHV0aWxzLnByZWZpeFBvaW50ZXJFdmVudCgncG9pbnRlcnVwJyksIHRoaXMpOwogICAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgJ21vdXNldXAnLCB0aGlzKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5kZWZhdWx0U2Nyb2xsYmFycykgewogICAgICAgIHRoaXMud3JhcHBlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMud3JhcHBlcik7CiAgICAgIH0KICAgIH0sCiAgICBfc3RhcnQ6IGZ1bmN0aW9uIF9zdGFydChlKSB7CiAgICAgIHZhciBwb2ludCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXSA6IGU7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgdGhpcy50cmFuc2l0aW9uVGltZSgpOwogICAgICB0aGlzLmluaXRpYXRlZCA9IHRydWU7CiAgICAgIHRoaXMubW92ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5sYXN0UG9pbnRYID0gcG9pbnQucGFnZVg7CiAgICAgIHRoaXMubGFzdFBvaW50WSA9IHBvaW50LnBhZ2VZOwogICAgICB0aGlzLnN0YXJ0VGltZSA9IHV0aWxzLmdldFRpbWUoKTsKCiAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpc2FibGVUb3VjaCkgewogICAgICAgIHV0aWxzLmFkZEV2ZW50KHdpbmRvdywgJ3RvdWNobW92ZScsIHRoaXMpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMub3B0aW9ucy5kaXNhYmxlUG9pbnRlcikgewogICAgICAgIHV0aWxzLmFkZEV2ZW50KHdpbmRvdywgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVybW92ZScpLCB0aGlzKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZGlzYWJsZU1vdXNlKSB7CiAgICAgICAgdXRpbHMuYWRkRXZlbnQod2luZG93LCAnbW91c2Vtb3ZlJywgdGhpcyk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2Nyb2xsZXIuX2V4ZWNFdmVudCgnYmVmb3JlU2Nyb2xsU3RhcnQnKTsKICAgIH0sCiAgICBfbW92ZTogZnVuY3Rpb24gX21vdmUoZSkgewogICAgICB2YXIgcG9pbnQgPSBlLnRvdWNoZXMgPyBlLnRvdWNoZXNbMF0gOiBlLAogICAgICAgICAgZGVsdGFYLAogICAgICAgICAgZGVsdGFZLAogICAgICAgICAgbmV3WCwKICAgICAgICAgIG5ld1ksCiAgICAgICAgICB0aW1lc3RhbXAgPSB1dGlscy5nZXRUaW1lKCk7CgogICAgICBpZiAoIXRoaXMubW92ZWQpIHsKICAgICAgICB0aGlzLnNjcm9sbGVyLl9leGVjRXZlbnQoJ3Njcm9sbFN0YXJ0Jyk7CiAgICAgIH0KCiAgICAgIHRoaXMubW92ZWQgPSB0cnVlOwogICAgICBkZWx0YVggPSBwb2ludC5wYWdlWCAtIHRoaXMubGFzdFBvaW50WDsKICAgICAgdGhpcy5sYXN0UG9pbnRYID0gcG9pbnQucGFnZVg7CiAgICAgIGRlbHRhWSA9IHBvaW50LnBhZ2VZIC0gdGhpcy5sYXN0UG9pbnRZOwogICAgICB0aGlzLmxhc3RQb2ludFkgPSBwb2ludC5wYWdlWTsKICAgICAgbmV3WCA9IHRoaXMueCArIGRlbHRhWDsKICAgICAgbmV3WSA9IHRoaXMueSArIGRlbHRhWTsKCiAgICAgIHRoaXMuX3BvcyhuZXdYLCBuZXdZKTsKCiAgICAgIGlmICh0aGlzLnNjcm9sbGVyLm9wdGlvbnMucHJvYmVUeXBlID09IDEgJiYgdGltZXN0YW1wIC0gdGhpcy5zdGFydFRpbWUgPiAzMDApIHsKICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHRpbWVzdGFtcDsKCiAgICAgICAgdGhpcy5zY3JvbGxlci5fZXhlY0V2ZW50KCdzY3JvbGwnKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbGVyLm9wdGlvbnMucHJvYmVUeXBlID4gMSkgewogICAgICAgIHRoaXMuc2Nyb2xsZXIuX2V4ZWNFdmVudCgnc2Nyb2xsJyk7CiAgICAgIH0gLy8gSU5TRVJUIFBPSU5UOiBpbmRpY2F0b3IuX21vdmUKCgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9LAogICAgX2VuZDogZnVuY3Rpb24gX2VuZChlKSB7CiAgICAgIGlmICghdGhpcy5pbml0aWF0ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdGlhdGVkID0gZmFsc2U7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAndG91Y2htb3ZlJywgdGhpcyk7CiAgICAgIHV0aWxzLnJlbW92ZUV2ZW50KHdpbmRvdywgdXRpbHMucHJlZml4UG9pbnRlckV2ZW50KCdwb2ludGVybW92ZScpLCB0aGlzKTsKICAgICAgdXRpbHMucmVtb3ZlRXZlbnQod2luZG93LCAnbW91c2Vtb3ZlJywgdGhpcyk7CgogICAgICBpZiAodGhpcy5zY3JvbGxlci5vcHRpb25zLnNuYXApIHsKICAgICAgICB2YXIgc25hcCA9IHRoaXMuc2Nyb2xsZXIuX25lYXJlc3RTbmFwKHRoaXMuc2Nyb2xsZXIueCwgdGhpcy5zY3JvbGxlci55KTsKCiAgICAgICAgdmFyIHRpbWUgPSB0aGlzLm9wdGlvbnMuc25hcFNwZWVkIHx8IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKE1hdGguYWJzKHRoaXMuc2Nyb2xsZXIueCAtIHNuYXAueCksIDEwMDApLCBNYXRoLm1pbihNYXRoLmFicyh0aGlzLnNjcm9sbGVyLnkgLSBzbmFwLnkpLCAxMDAwKSksIDMwMCk7CgogICAgICAgIGlmICh0aGlzLnNjcm9sbGVyLnggIT0gc25hcC54IHx8IHRoaXMuc2Nyb2xsZXIueSAhPSBzbmFwLnkpIHsKICAgICAgICAgIHRoaXMuc2Nyb2xsZXIuZGlyZWN0aW9uWCA9IDA7CiAgICAgICAgICB0aGlzLnNjcm9sbGVyLmRpcmVjdGlvblkgPSAwOwogICAgICAgICAgdGhpcy5zY3JvbGxlci5jdXJyZW50UGFnZSA9IHNuYXA7CiAgICAgICAgICB0aGlzLnNjcm9sbGVyLnNjcm9sbFRvKHNuYXAueCwgc25hcC55LCB0aW1lLCB0aGlzLnNjcm9sbGVyLm9wdGlvbnMuYm91bmNlRWFzaW5nKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm1vdmVkKSB7CiAgICAgICAgdGhpcy5zY3JvbGxlci5fZXhlY0V2ZW50KCdzY3JvbGxFbmQnKTsKICAgICAgfQogICAgfSwKICAgIHRyYW5zaXRpb25UaW1lOiBmdW5jdGlvbiB0cmFuc2l0aW9uVGltZSh0aW1lKSB7CiAgICAgIHRpbWUgPSB0aW1lIHx8IDA7CiAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9IHRpbWUgKyAnbXMnOwoKICAgICAgaWYgKCF0aW1lICYmIHV0aWxzLmlzQmFkQW5kcm9pZCkgewogICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9ICcwLjAwMXMnOwogICAgICB9CiAgICB9LAogICAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24oZWFzaW5nKSB7CiAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uXSA9IGVhc2luZzsKICAgIH0sCiAgICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKCkgewogICAgICB0aGlzLnRyYW5zaXRpb25UaW1lKCk7CgogICAgICBpZiAodGhpcy5vcHRpb25zLmxpc3RlblggJiYgIXRoaXMub3B0aW9ucy5saXN0ZW5ZKSB7CiAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5kaXNwbGF5ID0gdGhpcy5zY3JvbGxlci5oYXNIb3Jpem9udGFsU2Nyb2xsID8gJ2Jsb2NrJyA6ICdub25lJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMubGlzdGVuWSAmJiAhdGhpcy5vcHRpb25zLmxpc3RlblgpIHsKICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmRpc3BsYXkgPSB0aGlzLnNjcm9sbGVyLmhhc1ZlcnRpY2FsU2Nyb2xsID8gJ2Jsb2NrJyA6ICdub25lJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmRpc3BsYXkgPSB0aGlzLnNjcm9sbGVyLmhhc0hvcml6b250YWxTY3JvbGwgfHwgdGhpcy5zY3JvbGxlci5oYXNWZXJ0aWNhbFNjcm9sbCA/ICdibG9jaycgOiAnbm9uZSc7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNjcm9sbGVyLmhhc0hvcml6b250YWxTY3JvbGwgJiYgdGhpcy5zY3JvbGxlci5oYXNWZXJ0aWNhbFNjcm9sbCkgewogICAgICAgIHV0aWxzLmFkZENsYXNzKHRoaXMud3JhcHBlciwgJ2lTY3JvbGxCb3RoU2Nyb2xsYmFycycpOwogICAgICAgIHV0aWxzLnJlbW92ZUNsYXNzKHRoaXMud3JhcHBlciwgJ2lTY3JvbGxMb25lU2Nyb2xsYmFyJyk7CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGVmYXVsdFNjcm9sbGJhcnMgJiYgdGhpcy5vcHRpb25zLmN1c3RvbVN0eWxlKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxpc3RlblgpIHsKICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnJpZ2h0ID0gJzhweCc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUuYm90dG9tID0gJzhweCc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHV0aWxzLnJlbW92ZUNsYXNzKHRoaXMud3JhcHBlciwgJ2lTY3JvbGxCb3RoU2Nyb2xsYmFycycpOwogICAgICAgIHV0aWxzLmFkZENsYXNzKHRoaXMud3JhcHBlciwgJ2lTY3JvbGxMb25lU2Nyb2xsYmFyJyk7CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGVmYXVsdFNjcm9sbGJhcnMgJiYgdGhpcy5vcHRpb25zLmN1c3RvbVN0eWxlKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxpc3RlblgpIHsKICAgICAgICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnJpZ2h0ID0gJzJweCc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUuYm90dG9tID0gJzJweCc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgciA9IHRoaXMud3JhcHBlci5vZmZzZXRIZWlnaHQ7IC8vIGZvcmNlIHJlZnJlc2gKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGlzdGVuWCkgewogICAgICAgIHRoaXMud3JhcHBlcldpZHRoID0gdGhpcy53cmFwcGVyLmNsaWVudFdpZHRoOwoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlc2l6ZSkgewogICAgICAgICAgdGhpcy5pbmRpY2F0b3JXaWR0aCA9IE1hdGgubWF4KE1hdGgucm91bmQodGhpcy53cmFwcGVyV2lkdGggKiB0aGlzLndyYXBwZXJXaWR0aCAvICh0aGlzLnNjcm9sbGVyLnNjcm9sbGVyV2lkdGggfHwgdGhpcy53cmFwcGVyV2lkdGggfHwgMSkpLCA4KTsKICAgICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUud2lkdGggPSB0aGlzLmluZGljYXRvcldpZHRoICsgJ3B4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pbmRpY2F0b3JXaWR0aCA9IHRoaXMuaW5kaWNhdG9yLmNsaWVudFdpZHRoOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5tYXhQb3NYID0gdGhpcy53cmFwcGVyV2lkdGggLSB0aGlzLmluZGljYXRvcldpZHRoOwoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNocmluayA9PSAnY2xpcCcpIHsKICAgICAgICAgIHRoaXMubWluQm91bmRhcnlYID0gLXRoaXMuaW5kaWNhdG9yV2lkdGggKyA4OwogICAgICAgICAgdGhpcy5tYXhCb3VuZGFyeVggPSB0aGlzLndyYXBwZXJXaWR0aCAtIDg7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubWluQm91bmRhcnlYID0gMDsKICAgICAgICAgIHRoaXMubWF4Qm91bmRhcnlYID0gdGhpcy5tYXhQb3NYOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zaXplUmF0aW9YID0gdGhpcy5vcHRpb25zLnNwZWVkUmF0aW9YIHx8IHRoaXMuc2Nyb2xsZXIubWF4U2Nyb2xsWCAmJiB0aGlzLm1heFBvc1ggLyB0aGlzLnNjcm9sbGVyLm1heFNjcm9sbFg7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9wdGlvbnMubGlzdGVuWSkgewogICAgICAgIHRoaXMud3JhcHBlckhlaWdodCA9IHRoaXMud3JhcHBlci5jbGllbnRIZWlnaHQ7CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVzaXplKSB7CiAgICAgICAgICB0aGlzLmluZGljYXRvckhlaWdodCA9IE1hdGgubWF4KE1hdGgucm91bmQodGhpcy53cmFwcGVySGVpZ2h0ICogdGhpcy53cmFwcGVySGVpZ2h0IC8gKHRoaXMuc2Nyb2xsZXIuc2Nyb2xsZXJIZWlnaHQgfHwgdGhpcy53cmFwcGVySGVpZ2h0IHx8IDEpKSwgOCk7CiAgICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLmhlaWdodCA9IHRoaXMuaW5kaWNhdG9ySGVpZ2h0ICsgJ3B4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pbmRpY2F0b3JIZWlnaHQgPSB0aGlzLmluZGljYXRvci5jbGllbnRIZWlnaHQ7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm1heFBvc1kgPSB0aGlzLndyYXBwZXJIZWlnaHQgLSB0aGlzLmluZGljYXRvckhlaWdodDsKCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaHJpbmsgPT0gJ2NsaXAnKSB7CiAgICAgICAgICB0aGlzLm1pbkJvdW5kYXJ5WSA9IC10aGlzLmluZGljYXRvckhlaWdodCArIDg7CiAgICAgICAgICB0aGlzLm1heEJvdW5kYXJ5WSA9IHRoaXMud3JhcHBlckhlaWdodCAtIDg7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubWluQm91bmRhcnlZID0gMDsKICAgICAgICAgIHRoaXMubWF4Qm91bmRhcnlZID0gdGhpcy5tYXhQb3NZOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5tYXhQb3NZID0gdGhpcy53cmFwcGVySGVpZ2h0IC0gdGhpcy5pbmRpY2F0b3JIZWlnaHQ7CiAgICAgICAgdGhpcy5zaXplUmF0aW9ZID0gdGhpcy5vcHRpb25zLnNwZWVkUmF0aW9ZIHx8IHRoaXMuc2Nyb2xsZXIubWF4U2Nyb2xsWSAmJiB0aGlzLm1heFBvc1kgLyB0aGlzLnNjcm9sbGVyLm1heFNjcm9sbFk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTsKICAgIH0sCiAgICB1cGRhdGVQb3NpdGlvbjogZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oKSB7CiAgICAgIHZhciB4ID0gdGhpcy5vcHRpb25zLmxpc3RlblggJiYgTWF0aC5yb3VuZCh0aGlzLnNpemVSYXRpb1ggKiB0aGlzLnNjcm9sbGVyLngpIHx8IDAsCiAgICAgICAgICB5ID0gdGhpcy5vcHRpb25zLmxpc3RlblkgJiYgTWF0aC5yb3VuZCh0aGlzLnNpemVSYXRpb1kgKiB0aGlzLnNjcm9sbGVyLnkpIHx8IDA7CgogICAgICBpZiAoIXRoaXMub3B0aW9ucy5pZ25vcmVCb3VuZGFyaWVzKSB7CiAgICAgICAgaWYgKHggPCB0aGlzLm1pbkJvdW5kYXJ5WCkgewogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaHJpbmsgPT0gJ3NjYWxlJykgewogICAgICAgICAgICB0aGlzLndpZHRoID0gTWF0aC5tYXgodGhpcy5pbmRpY2F0b3JXaWR0aCArIHgsIDgpOwogICAgICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7CiAgICAgICAgICB9CgogICAgICAgICAgeCA9IHRoaXMubWluQm91bmRhcnlYOwogICAgICAgIH0gZWxzZSBpZiAoeCA+IHRoaXMubWF4Qm91bmRhcnlYKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnKSB7CiAgICAgICAgICAgIHRoaXMud2lkdGggPSBNYXRoLm1heCh0aGlzLmluZGljYXRvcldpZHRoIC0gKHggLSB0aGlzLm1heFBvc1gpLCA4KTsKICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnOwogICAgICAgICAgICB4ID0gdGhpcy5tYXhQb3NYICsgdGhpcy5pbmRpY2F0b3JXaWR0aCAtIHRoaXMud2lkdGg7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB4ID0gdGhpcy5tYXhCb3VuZGFyeVg7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2hyaW5rID09ICdzY2FsZScgJiYgdGhpcy53aWR0aCAhPSB0aGlzLmluZGljYXRvcldpZHRoKSB7CiAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5pbmRpY2F0b3JXaWR0aDsKICAgICAgICAgIHRoaXMuaW5kaWNhdG9yU3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgJ3B4JzsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgdGhpcy5taW5Cb3VuZGFyeVkpIHsKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hyaW5rID09ICdzY2FsZScpIHsKICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCh0aGlzLmluZGljYXRvckhlaWdodCArIHkgKiAzLCA4KTsKICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7CiAgICAgICAgICB9CgogICAgICAgICAgeSA9IHRoaXMubWluQm91bmRhcnlZOwogICAgICAgIH0gZWxzZSBpZiAoeSA+IHRoaXMubWF4Qm91bmRhcnlZKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnKSB7CiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5pbmRpY2F0b3JIZWlnaHQgLSAoeSAtIHRoaXMubWF4UG9zWSkgKiAzLCA4KTsKICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7CiAgICAgICAgICAgIHkgPSB0aGlzLm1heFBvc1kgKyB0aGlzLmluZGljYXRvckhlaWdodCAtIHRoaXMuaGVpZ2h0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgeSA9IHRoaXMubWF4Qm91bmRhcnlZOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnNocmluayA9PSAnc2NhbGUnICYmIHRoaXMuaGVpZ2h0ICE9IHRoaXMuaW5kaWNhdG9ySGVpZ2h0KSB7CiAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuaW5kaWNhdG9ySGVpZ2h0OwogICAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwoKICAgICAgaWYgKHRoaXMuc2Nyb2xsZXIub3B0aW9ucy51c2VUcmFuc2Zvcm0pIHsKICAgICAgICB0aGlzLmluZGljYXRvclN0eWxlW3V0aWxzLnN0eWxlLnRyYW5zZm9ybV0gPSAndHJhbnNsYXRlKCcgKyB4ICsgJ3B4LCcgKyB5ICsgJ3B4KScgKyB0aGlzLnNjcm9sbGVyLnRyYW5zbGF0ZVo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS5sZWZ0ID0geCArICdweCc7CiAgICAgICAgdGhpcy5pbmRpY2F0b3JTdHlsZS50b3AgPSB5ICsgJ3B4JzsKICAgICAgfQogICAgfSwKICAgIF9wb3M6IGZ1bmN0aW9uIF9wb3MoeCwgeSkgewogICAgICBpZiAoeCA8IDApIHsKICAgICAgICB4ID0gMDsKICAgICAgfSBlbHNlIGlmICh4ID4gdGhpcy5tYXhQb3NYKSB7CiAgICAgICAgeCA9IHRoaXMubWF4UG9zWDsKICAgICAgfQoKICAgICAgaWYgKHkgPCAwKSB7CiAgICAgICAgeSA9IDA7CiAgICAgIH0gZWxzZSBpZiAoeSA+IHRoaXMubWF4UG9zWSkgewogICAgICAgIHkgPSB0aGlzLm1heFBvc1k7CiAgICAgIH0KCiAgICAgIHggPSB0aGlzLm9wdGlvbnMubGlzdGVuWCA/IE1hdGgucm91bmQoeCAvIHRoaXMuc2l6ZVJhdGlvWCkgOiB0aGlzLnNjcm9sbGVyLng7CiAgICAgIHkgPSB0aGlzLm9wdGlvbnMubGlzdGVuWSA/IE1hdGgucm91bmQoeSAvIHRoaXMuc2l6ZVJhdGlvWSkgOiB0aGlzLnNjcm9sbGVyLnk7CiAgICAgIHRoaXMuc2Nyb2xsZXIuc2Nyb2xsVG8oeCwgeSk7CiAgICB9LAogICAgZmFkZTogZnVuY3Rpb24gZmFkZSh2YWwsIGhvbGQpIHsKICAgICAgaWYgKGhvbGQgJiYgIXRoaXMudmlzaWJsZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZmFkZVRpbWVvdXQpOwogICAgICB0aGlzLmZhZGVUaW1lb3V0ID0gbnVsbDsKICAgICAgdmFyIHRpbWUgPSB2YWwgPyAyNTAgOiA1MDAsCiAgICAgICAgICBkZWxheSA9IHZhbCA/IDAgOiAzMDA7CiAgICAgIHZhbCA9IHZhbCA/ICcxJyA6ICcwJzsKICAgICAgdGhpcy53cmFwcGVyU3R5bGVbdXRpbHMuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uXSA9IHRpbWUgKyAnbXMnOwogICAgICB0aGlzLmZhZGVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdGhpcy53cmFwcGVyU3R5bGUub3BhY2l0eSA9IHZhbDsKICAgICAgICB0aGlzLnZpc2libGUgPSArdmFsOwogICAgICB9LmJpbmQodGhpcywgdmFsKSwgZGVsYXkpOwogICAgfQogIH07CiAgSVNjcm9sbC51dGlscyA9IHV0aWxzOwoKICBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgbW9kdWxlLmV4cG9ydHMgPSBJU2Nyb2xsOwogIH0gZWxzZSB7CiAgICB3aW5kb3cuSVNjcm9sbCA9IElTY3JvbGw7CiAgfQp9KSh3aW5kb3csIGRvY3VtZW50LCBNYXRoKTs="},{"version":3,"sources":["/Users/wusaisai/Desktop/jd/src/assets/js/libs/iscroll.js"],"names":["window","document","Math","rAF","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","utils","me","_elementStyle","createElement","style","_vendor","vendors","transform","i","l","length","substr","_prefixStyle","charAt","toUpperCase","getTime","Date","now","extend","target","obj","addEvent","el","type","fn","capture","addEventListener","removeEvent","removeEventListener","prefixPointerEvent","pointerEvent","MSPointerEvent","momentum","current","start","time","lowerMargin","wrapperSize","deceleration","distance","speed","abs","destination","duration","undefined","round","_transform","hasTransform","hasPerspective","hasTouch","hasPointer","PointerEvent","hasTransition","isBadAndroid","test","navigator","appVersion","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","hasClass","e","c","re","RegExp","className","addClass","newclass","split","push","join","removeClass","replace","offset","left","offsetLeft","top","offsetTop","offsetParent","preventDefaultException","exceptions","eventType","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","pointerdown","pointermove","pointerup","MSPointerDown","MSPointerMove","MSPointerUp","ease","quadratic","k","circular","sqrt","back","b","bounce","elastic","f","pow","sin","PI","tap","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","tagName","initMouseEvent","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","_constructed","IScroll","options","wrapper","querySelector","scroller","children","scrollerStyle","resizeScrollbars","mouseWheelSpeed","snapThreshold","startX","startY","scrollY","directionLockThreshold","bounceTime","bounceEasing","preventDefault","HWCompositing","useTransition","useTransform","translateZ","eventPassthrough","scrollX","freeScroll","resizePolling","shrinkScrollbars","invertWheelDirection","probeType","x","y","directionX","directionY","_events","_init","refresh","scrollTo","enable","prototype","version","_initEvents","scrollbars","indicators","_initIndicators","mouseWheel","_initWheel","snap","_initSnap","keyBindings","_initKeys","destroy","_execEvent","_transitionEnd","isInTransition","_transitionTime","resetPosition","_start","button","enabled","initiated","point","touches","pos","moved","distX","distY","directionLocked","startTime","getComputedPosition","_translate","isAnimating","absStartX","absStartY","pointX","pointY","_move","deltaX","deltaY","timestamp","newX","newY","absDistX","absDistY","endTime","hasHorizontalScroll","hasVerticalScroll","maxScrollX","maxScrollY","_end","changedTouches","momentumX","momentumY","distanceX","distanceY","easing","flick","wrapperWidth","wrapperHeight","max","_nearestSnap","currentPage","snapSpeed","min","_resize","that","clearTimeout","resizeTimeout","disable","rf","offsetHeight","clientWidth","clientHeight","scrollerWidth","offsetWidth","scrollerHeight","wrapperOffset","on","off","index","indexOf","splice","apply","slice","call","arguments","scrollBy","_transitionTimingFunction","_animate","scrollToElement","offsetX","offsetY","nodeType","transitionTime","updatePosition","remove","bindToWrapper","disableMouse","disablePointer","disableTouch","matrix","getComputedStyle","interactive","interactiveScrollbars","customStyle","indicator","createDefaultScrollbar","defaultScrollbars","resize","shrink","fade","fadeScrollbars","listenX","appendChild","listenY","concat","Indicator","_indicatorsMap","_wheel","stopPropagation","wheelDeltaX","wheelDeltaY","wheelTimeout","wheelDelta","detail","goToPage","querySelectorAll","m","n","cx","cy","stepX","snapStepX","stepY","snapStepY","pages","width","height","snapThresholdX","snapThresholdY","posX","posY","next","prev","keys","pageUp","pageDown","end","home","up","right","down","charCodeAt","_key","prevTime","keyTime","acceleration","keyAcceleration","keyCode","destX","destY","easingFn","destTime","step","handleEvent","direction","scrollbar","cssText","pointerEvents","wrapperStyle","indicatorStyle","speedRatioX","speedRatioY","sizeRatioX","sizeRatioY","maxPosX","maxPosY","opacity","parentNode","removeChild","lastPointX","lastPointY","_pos","display","bottom","r","indicatorWidth","minBoundaryX","maxBoundaryX","indicatorHeight","minBoundaryY","maxBoundaryY","ignoreBoundaries","val","hold","visible","fadeTimeout","delay","bind","module","exports"],"mappings":"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","sourcesContent":["/*! iScroll v5.1.2 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */\n(function (window, document, Math) {\nvar rAF = window.requestAnimationFrame\t||\n\twindow.webkitRequestAnimationFrame\t||\n\twindow.mozRequestAnimationFrame\t\t||\n\twindow.oRequestAnimationFrame\t\t||\n\twindow.msRequestAnimationFrame\t\t||\n\tfunction (callback) { window.setTimeout(callback, 1000 / 60); };\n\nvar utils = (function () {\n\tvar me = {};\n\n\tvar _elementStyle = document.createElement('div').style;\n\tvar _vendor = (function () {\n\t\tvar vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\n\t\t\ttransform,\n\t\t\ti = 0,\n\t\t\tl = vendors.length;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\ttransform = vendors[i] + 'ransform';\n\t\t\tif ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tfunction _prefixStyle (style) {\n\t\tif ( _vendor === false ) return false;\n\t\tif ( _vendor === '' ) return style;\n\t\treturn _vendor + style.charAt(0).toUpperCase() + style.substr(1);\n\t}\n\n\tme.getTime = Date.now || function getTime () { return new Date().getTime(); };\n\n\tme.extend = function (target, obj) {\n\t\tfor ( var i in obj ) {\n\t\t\ttarget[i] = obj[i];\n\t\t}\n\t};\n\n\tme.addEvent = function (el, type, fn, capture) {\n\t\tel.addEventListener(type, fn, !!capture);\n\t};\n\n\tme.removeEvent = function (el, type, fn, capture) {\n\t\tel.removeEventListener(type, fn, !!capture);\n\t};\n\n\tme.prefixPointerEvent = function (pointerEvent) {\n\t\treturn window.MSPointerEvent ? \n\t\t\t'MSPointer' + pointerEvent.charAt(9).toUpperCase() + pointerEvent.substr(10):\n\t\t\tpointerEvent;\n\t};\n\n\tme.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {\n\t\tvar distance = current - start,\n\t\t\tspeed = Math.abs(distance) / time,\n\t\t\tdestination,\n\t\t\tduration;\n\n\t\tdeceleration = deceleration === undefined ? 0.0006 : deceleration;\n\n\t\tdestination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );\n\t\tduration = speed / deceleration;\n\n\t\tif ( destination < lowerMargin ) {\n\t\t\tdestination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;\n\t\t\tdistance = Math.abs(destination - current);\n\t\t\tduration = distance / speed;\n\t\t} else if ( destination > 0 ) {\n\t\t\tdestination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;\n\t\t\tdistance = Math.abs(current) + destination;\n\t\t\tduration = distance / speed;\n\t\t}\n\n\t\treturn {\n\t\t\tdestination: Math.round(destination),\n\t\t\tduration: duration\n\t\t};\n\t};\n\n\tvar _transform = _prefixStyle('transform');\n\n\tme.extend(me, {\n\t\thasTransform: _transform !== false,\n\t\thasPerspective: _prefixStyle('perspective') in _elementStyle,\n\t\thasTouch: 'ontouchstart' in window,\n\t\thasPointer: window.PointerEvent || window.MSPointerEvent, // IE10 is prefixed\n\t\thasTransition: _prefixStyle('transition') in _elementStyle\n\t});\n\n\t// This should find all Android browsers lower than build 535.19 (both stock browser and webview)\n\tme.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\\/\\d/.test(window.navigator.appVersion));\n\n\tme.extend(me.style = {}, {\n\t\ttransform: _transform,\n\t\ttransitionTimingFunction: _prefixStyle('transitionTimingFunction'),\n\t\ttransitionDuration: _prefixStyle('transitionDuration'),\n\t\ttransitionDelay: _prefixStyle('transitionDelay'),\n\t\ttransformOrigin: _prefixStyle('transformOrigin')\n\t});\n\n\tme.hasClass = function (e, c) {\n\t\tvar re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\n\t\treturn re.test(e.className);\n\t};\n\n\tme.addClass = function (e, c) {\n\t\tif ( me.hasClass(e, c) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar newclass = e.className.split(' ');\n\t\tnewclass.push(c);\n\t\te.className = newclass.join(' ');\n\t};\n\n\tme.removeClass = function (e, c) {\n\t\tif ( !me.hasClass(e, c) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\n\t\te.className = e.className.replace(re, ' ');\n\t};\n\n\tme.offset = function (el) {\n\t\tvar left = -el.offsetLeft,\n\t\t\ttop = -el.offsetTop;\n\n\t\t// jshint -W084\n\t\twhile (el = el.offsetParent) {\n\t\t\tleft -= el.offsetLeft;\n\t\t\ttop -= el.offsetTop;\n\t\t}\n\t\t// jshint +W084\n\n\t\treturn {\n\t\t\tleft: left,\n\t\t\ttop: top\n\t\t};\n\t};\n\n\tme.preventDefaultException = function (el, exceptions) {\n\t\tfor ( var i in exceptions ) {\n\t\t\tif ( exceptions[i].test(el[i]) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tme.extend(me.eventType = {}, {\n\t\ttouchstart: 1,\n\t\ttouchmove: 1,\n\t\ttouchend: 1,\n\n\t\tmousedown: 2,\n\t\tmousemove: 2,\n\t\tmouseup: 2,\n\n\t\tpointerdown: 3,\n\t\tpointermove: 3,\n\t\tpointerup: 3,\n\n\t\tMSPointerDown: 3,\n\t\tMSPointerMove: 3,\n\t\tMSPointerUp: 3\n\t});\n\n\tme.extend(me.ease = {}, {\n\t\tquadratic: {\n\t\t\tstyle: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n\t\t\tfn: function (k) {\n\t\t\t\treturn k * ( 2 - k );\n\t\t\t}\n\t\t},\n\t\tcircular: {\n\t\t\tstyle: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\t// Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\n\t\t\tfn: function (k) {\n\t\t\t\treturn Math.sqrt( 1 - ( --k * k ) );\n\t\t\t}\n\t\t},\n\t\tback: {\n\t\t\tstyle: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n\t\t\tfn: function (k) {\n\t\t\t\tvar b = 4;\n\t\t\t\treturn ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;\n\t\t\t}\n\t\t},\n\t\tbounce: {\n\t\t\tstyle: '',\n\t\t\tfn: function (k) {\n\t\t\t\tif ( ( k /= 1 ) < ( 1 / 2.75 ) ) {\n\t\t\t\t\treturn 7.5625 * k * k;\n\t\t\t\t} else if ( k < ( 2 / 2.75 ) ) {\n\t\t\t\t\treturn 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\t\t\t\t} else if ( k < ( 2.5 / 2.75 ) ) {\n\t\t\t\t\treturn 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\t\t\t\t} else {\n\t\t\t\t\treturn 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\telastic: {\n\t\t\tstyle: '',\n\t\t\tfn: function (k) {\n\t\t\t\tvar f = 0.22,\n\t\t\t\t\te = 0.4;\n\n\t\t\t\tif ( k === 0 ) { return 0; }\n\t\t\t\tif ( k == 1 ) { return 1; }\n\n\t\t\t\treturn ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );\n\t\t\t}\n\t\t}\n\t});\n\n\tme.tap = function (e, eventName) {\n\t\tvar ev = document.createEvent('Event');\n\t\tev.initEvent(eventName, true, true);\n\t\tev.pageX = e.pageX;\n\t\tev.pageY = e.pageY;\n\t\te.target.dispatchEvent(ev);\n\t};\n\n\tme.click = function (e) {\n\t\tvar target = e.target,\n\t\t\tev;\n\n\t\tif ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {\n\t\t\tev = document.createEvent('MouseEvents');\n\t\t\tev.initMouseEvent('click', true, true, e.view, 1,\n\t\t\t\ttarget.screenX, target.screenY, target.clientX, target.clientY,\n\t\t\t\te.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\n\t\t\t\t0, null);\n\n\t\t\tev._constructed = true;\n\t\t\ttarget.dispatchEvent(ev);\n\t\t}\n\t};\n\n\treturn me;\n})();\n\nfunction IScroll (el, options) {\n\tthis.wrapper = typeof el == 'string' ? document.querySelector(el) : el;\n\tthis.scroller = this.wrapper.children[0];\n\tthis.scrollerStyle = this.scroller.style;\t\t// cache style for better performance\n\n\tthis.options = {\n\n\t\tresizeScrollbars: true,\n\n\t\tmouseWheelSpeed: 20,\n\n\t\tsnapThreshold: 0.334,\n\n// INSERT POINT: OPTIONS \n\n\t\tstartX: 0,\n\t\tstartY: 0,\n\t\tscrollY: true,\n\t\tdirectionLockThreshold: 5,\n\t\tmomentum: true,\n\n\t\tbounce: true,\n\t\tbounceTime: 600,\n\t\tbounceEasing: '',\n\n\t\tpreventDefault: true,\n\t\tpreventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/ },\n\n\t\tHWCompositing: true,\n\t\tuseTransition: true,\n\t\tuseTransform: true\n\t};\n\n\tfor ( var i in options ) {\n\t\tthis.options[i] = options[i];\n\t}\n\n\t// Normalize options\n\tthis.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';\n\n\tthis.options.useTransition = utils.hasTransition && this.options.useTransition;\n\tthis.options.useTransform = utils.hasTransform && this.options.useTransform;\n\n\tthis.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;\n\tthis.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\n\n\t// If you want eventPassthrough I have to lock one of the axes\n\tthis.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;\n\tthis.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;\n\n\t// With eventPassthrough we also need lockDirection mechanism\n\tthis.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n\tthis.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n\n\tthis.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;\n\n\tthis.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;\n\n\tif ( this.options.tap === true ) {\n\t\tthis.options.tap = 'tap';\n\t}\n\n\tif ( this.options.shrinkScrollbars == 'scale' ) {\n\t\tthis.options.useTransition = false;\n\t}\n\n\tthis.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;\n\n\tif ( this.options.probeType == 3 ) {\n\t\tthis.options.useTransition = false;\t}\n\n// INSERT POINT: NORMALIZATION\n\n\t// Some defaults\t\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.directionX = 0;\n\tthis.directionY = 0;\n\tthis._events = {};\n\n// INSERT POINT: DEFAULTS\n\n\tthis._init();\n\tthis.refresh();\n\n\tthis.scrollTo(this.options.startX, this.options.startY);\n\tthis.enable();\n}\n\nIScroll.prototype = {\n\tversion: '5.1.2',\n\n\t_init: function () {\n\t\tthis._initEvents();\n\n\t\tif ( this.options.scrollbars || this.options.indicators ) {\n\t\t\tthis._initIndicators();\n\t\t}\n\n\t\tif ( this.options.mouseWheel ) {\n\t\t\tthis._initWheel();\n\t\t}\n\n\t\tif ( this.options.snap ) {\n\t\t\tthis._initSnap();\n\t\t}\n\n\t\tif ( this.options.keyBindings ) {\n\t\t\tthis._initKeys();\n\t\t}\n\n// INSERT POINT: _init\n\n\t},\n\n\tdestroy: function () {\n\t\tthis._initEvents(true);\n\n\t\tthis._execEvent('destroy');\n\t},\n\n\t_transitionEnd: function (e) {\n\t\tif ( e.target != this.scroller || !this.isInTransition ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._transitionTime();\n\t\tif ( !this.resetPosition(this.options.bounceTime) ) {\n\t\t\tthis.isInTransition = false;\n\t\t\tthis._execEvent('scrollEnd');\n\t\t}\n\t},\n\n\t_start: function (e) {\n\t\t// React to left mouse button only\n\t\tif ( utils.eventType[e.type] != 1 ) {\n\t\t\tif ( e.button !== 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tvar point = e.touches ? e.touches[0] : e,\n\t\t\tpos;\n\n\t\tthis.initiated\t= utils.eventType[e.type];\n\t\tthis.moved\t\t= false;\n\t\tthis.distX\t\t= 0;\n\t\tthis.distY\t\t= 0;\n\t\tthis.directionX = 0;\n\t\tthis.directionY = 0;\n\t\tthis.directionLocked = 0;\n\n\t\tthis._transitionTime();\n\n\t\tthis.startTime = utils.getTime();\n\n\t\tif ( this.options.useTransition && this.isInTransition ) {\n\t\t\tthis.isInTransition = false;\n\t\t\tpos = this.getComputedPosition();\n\t\t\tthis._translate(Math.round(pos.x), Math.round(pos.y));\n\t\t\tthis._execEvent('scrollEnd');\n\t\t} else if ( !this.options.useTransition && this.isAnimating ) {\n\t\t\tthis.isAnimating = false;\n\t\t\tthis._execEvent('scrollEnd');\n\t\t}\n\n\t\tthis.startX    = this.x;\n\t\tthis.startY    = this.y;\n\t\tthis.absStartX = this.x;\n\t\tthis.absStartY = this.y;\n\t\tthis.pointX    = point.pageX;\n\t\tthis.pointY    = point.pageY;\n\n\t\tthis._execEvent('beforeScrollStart');\n\t},\n\n\t_move: function (e) {\n\t\tif ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.options.preventDefault ) {\t// increases performance on Android? TODO: check!\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tvar point\t\t= e.touches ? e.touches[0] : e,\n\t\t\tdeltaX\t\t= point.pageX - this.pointX,\n\t\t\tdeltaY\t\t= point.pageY - this.pointY,\n\t\t\ttimestamp\t= utils.getTime(),\n\t\t\tnewX, newY,\n\t\t\tabsDistX, absDistY;\n\n\t\tthis.pointX\t\t= point.pageX;\n\t\tthis.pointY\t\t= point.pageY;\n\n\t\tthis.distX\t\t+= deltaX;\n\t\tthis.distY\t\t+= deltaY;\n\t\tabsDistX\t\t= Math.abs(this.distX);\n\t\tabsDistY\t\t= Math.abs(this.distY);\n\n\t\t// We need to move at least 10 pixels for the scrolling to initiate\n\t\tif ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If you are scrolling in one direction lock the other\n\t\tif ( !this.directionLocked && !this.options.freeScroll ) {\n\t\t\tif ( absDistX > absDistY + this.options.directionLockThreshold ) {\n\t\t\t\tthis.directionLocked = 'h';\t\t// lock horizontally\n\t\t\t} else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {\n\t\t\t\tthis.directionLocked = 'v';\t\t// lock vertically\n\t\t\t} else {\n\t\t\t\tthis.directionLocked = 'n';\t\t// no lock\n\t\t\t}\n\t\t}\n\n\t\tif ( this.directionLocked == 'h' ) {\n\t\t\tif ( this.options.eventPassthrough == 'vertical' ) {\n\t\t\t\te.preventDefault();\n\t\t\t} else if ( this.options.eventPassthrough == 'horizontal' ) {\n\t\t\t\tthis.initiated = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdeltaY = 0;\n\t\t} else if ( this.directionLocked == 'v' ) {\n\t\t\tif ( this.options.eventPassthrough == 'horizontal' ) {\n\t\t\t\te.preventDefault();\n\t\t\t} else if ( this.options.eventPassthrough == 'vertical' ) {\n\t\t\t\tthis.initiated = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdeltaX = 0;\n\t\t}\n\n\t\tdeltaX = this.hasHorizontalScroll ? deltaX : 0;\n\t\tdeltaY = this.hasVerticalScroll ? deltaY : 0;\n\n\t\tnewX = this.x + deltaX;\n\t\tnewY = this.y + deltaY;\n\n\t\t// Slow down if outside of the boundaries\n\t\tif ( newX > 0 || newX < this.maxScrollX ) {\n\t\t\tnewX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n\t\t}\n\t\tif ( newY > 0 || newY < this.maxScrollY ) {\n\t\t\tnewY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n\t\t}\n\n\t\tthis.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n\t\tthis.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n\t\tif ( !this.moved ) {\n\t\t\tthis._execEvent('scrollStart');\n\t\t}\n\n\t\tthis.moved = true;\n\n\t\tthis._translate(newX, newY);\n\n/* REPLACE START: _move */\n\t\tif ( timestamp - this.startTime > 300 ) {\n\t\t\tthis.startTime = timestamp;\n\t\t\tthis.startX = this.x;\n\t\t\tthis.startY = this.y;\n\n\t\t\tif ( this.options.probeType == 1 ) {\n\t\t\t\tthis._execEvent('scroll');\n\t\t\t}\n\t\t}\n\n\t\tif ( this.options.probeType > 1 ) {\n\t\t\tthis._execEvent('scroll');\n\t\t}\n/* REPLACE END: _move */\n\n\t},\n\n\t_end: function (e) {\n\t\tif ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tvar point = e.changedTouches ? e.changedTouches[0] : e,\n\t\t\tmomentumX,\n\t\t\tmomentumY,\n\t\t\tduration = utils.getTime() - this.startTime,\n\t\t\tnewX = Math.round(this.x),\n\t\t\tnewY = Math.round(this.y),\n\t\t\tdistanceX = Math.abs(newX - this.startX),\n\t\t\tdistanceY = Math.abs(newY - this.startY),\n\t\t\ttime = 0,\n\t\t\teasing = '';\n\n\t\tthis.isInTransition = 0;\n\t\tthis.initiated = 0;\n\t\tthis.endTime = utils.getTime();\n\n\t\t// reset if we are outside of the boundaries\n\t\tif ( this.resetPosition(this.options.bounceTime) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.scrollTo(newX, newY);\t// ensures that the last position is rounded\n\n\t\t// we scrolled less than 10 pixels\n\t\tif ( !this.moved ) {\n\t\t\tif ( this.options.tap ) {\n\t\t\t\tutils.tap(e, this.options.tap);\n\t\t\t}\n\n\t\t\tif ( this.options.click ) {\n\t\t\t\tutils.click(e);\n\t\t\t}\n\n\t\t\tthis._execEvent('scrollCancel');\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {\n\t\t\tthis._execEvent('flick');\n\t\t\treturn;\n\t\t}\n\n\t\t// start momentum animation if needed\n\t\tif ( this.options.momentum && duration < 300 ) {\n\t\t\tmomentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };\n\t\t\tmomentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };\n\t\t\tnewX = momentumX.destination;\n\t\t\tnewY = momentumY.destination;\n\t\t\ttime = Math.max(momentumX.duration, momentumY.duration);\n\t\t\tthis.isInTransition = 1;\n\t\t}\n\n\n\t\tif ( this.options.snap ) {\n\t\t\tvar snap = this._nearestSnap(newX, newY);\n\t\t\tthis.currentPage = snap;\n\t\t\ttime = this.options.snapSpeed || Math.max(\n\t\t\t\t\tMath.max(\n\t\t\t\t\t\tMath.min(Math.abs(newX - snap.x), 1000),\n\t\t\t\t\t\tMath.min(Math.abs(newY - snap.y), 1000)\n\t\t\t\t\t), 300);\n\t\t\tnewX = snap.x;\n\t\t\tnewY = snap.y;\n\n\t\t\tthis.directionX = 0;\n\t\t\tthis.directionY = 0;\n\t\t\teasing = this.options.bounceEasing;\n\t\t}\n\n// INSERT POINT: _end\n\n\t\tif ( newX != this.x || newY != this.y ) {\n\t\t\t// change easing function when scroller goes out of the boundaries\n\t\t\tif ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {\n\t\t\t\teasing = utils.ease.quadratic;\n\t\t\t}\n\n\t\t\tthis.scrollTo(newX, newY, time, easing);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._execEvent('scrollEnd');\n\t},\n\n\t_resize: function () {\n\t\tvar that = this;\n\n\t\tclearTimeout(this.resizeTimeout);\n\n\t\tthis.resizeTimeout = setTimeout(function () {\n\t\t\tthat.refresh();\n\t\t}, this.options.resizePolling);\n\t},\n\n\tresetPosition: function (time) {\n\t\tvar x = this.x,\n\t\t\ty = this.y;\n\n\t\ttime = time || 0;\n\n\t\tif ( !this.hasHorizontalScroll || this.x > 0 ) {\n\t\t\tx = 0;\n\t\t} else if ( this.x < this.maxScrollX ) {\n\t\t\tx = this.maxScrollX;\n\t\t}\n\n\t\tif ( !this.hasVerticalScroll || this.y > 0 ) {\n\t\t\ty = 0;\n\t\t} else if ( this.y < this.maxScrollY ) {\n\t\t\ty = this.maxScrollY;\n\t\t}\n\n\t\tif ( x == this.x && y == this.y ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.scrollTo(x, y, time, this.options.bounceEasing);\n\n\t\treturn true;\n\t},\n\n\tdisable: function () {\n\t\tthis.enabled = false;\n\t},\n\n\tenable: function () {\n\t\tthis.enabled = true;\n\t},\n\n\trefresh: function () {\n\t\tvar rf = this.wrapper.offsetHeight;\t\t// Force reflow\n\n\t\tthis.wrapperWidth\t= this.wrapper.clientWidth;\n\t\tthis.wrapperHeight\t= this.wrapper.clientHeight;\n\n/* REPLACE START: refresh */\n\n\t\tthis.scrollerWidth\t= this.scroller.offsetWidth;\n\t\tthis.scrollerHeight\t= this.scroller.offsetHeight;\n\n\t\tthis.maxScrollX\t\t= this.wrapperWidth - this.scrollerWidth;\n\t\tthis.maxScrollY\t\t= this.wrapperHeight - this.scrollerHeight;\n\n/* REPLACE END: refresh */\n\n\t\tthis.hasHorizontalScroll\t= this.options.scrollX && this.maxScrollX < 0;\n\t\tthis.hasVerticalScroll\t\t= this.options.scrollY && this.maxScrollY < 0;\n\n\t\tif ( !this.hasHorizontalScroll ) {\n\t\t\tthis.maxScrollX = 0;\n\t\t\tthis.scrollerWidth = this.wrapperWidth;\n\t\t}\n\n\t\tif ( !this.hasVerticalScroll ) {\n\t\t\tthis.maxScrollY = 0;\n\t\t\tthis.scrollerHeight = this.wrapperHeight;\n\t\t}\n\n\t\tthis.endTime = 0;\n\t\tthis.directionX = 0;\n\t\tthis.directionY = 0;\n\n\t\tthis.wrapperOffset = utils.offset(this.wrapper);\n\n\t\tthis._execEvent('refresh');\n\n\t\tthis.resetPosition();\n\n// INSERT POINT: _refresh\n\n\t},\n\n\ton: function (type, fn) {\n\t\tif ( !this._events[type] ) {\n\t\t\tthis._events[type] = [];\n\t\t}\n\n\t\tthis._events[type].push(fn);\n\t},\n\n\toff: function (type, fn) {\n\t\tif ( !this._events[type] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar index = this._events[type].indexOf(fn);\n\n\t\tif ( index > -1 ) {\n\t\t\tthis._events[type].splice(index, 1);\n\t\t}\n\t},\n\n\t_execEvent: function (type) {\n\t\tif ( !this._events[type] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar i = 0,\n\t\t\tl = this._events[type].length;\n\n\t\tif ( !l ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tthis._events[type][i].apply(this, [].slice.call(arguments, 1));\n\t\t}\n\t},\n\n\tscrollBy: function (x, y, time, easing) {\n\t\tx = this.x + x;\n\t\ty = this.y + y;\n\t\ttime = time || 0;\n\n\t\tthis.scrollTo(x, y, time, easing);\n\t},\n\n\tscrollTo: function (x, y, time, easing) {\n\t\teasing = easing || utils.ease.circular;\n\n\t\tthis.isInTransition = this.options.useTransition && time > 0;\n\n\t\tif ( !time || (this.options.useTransition && easing.style) ) {\n\t\t\tthis._transitionTimingFunction(easing.style);\n\t\t\tthis._transitionTime(time);\n\t\t\tthis._translate(x, y);\n\t\t} else {\n\t\t\tthis._animate(x, y, time, easing.fn);\n\t\t}\n\t},\n\n\tscrollToElement: function (el, time, offsetX, offsetY, easing) {\n\t\tel = el.nodeType ? el : this.scroller.querySelector(el);\n\n\t\tif ( !el ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar pos = utils.offset(el);\n\n\t\tpos.left -= this.wrapperOffset.left;\n\t\tpos.top  -= this.wrapperOffset.top;\n\n\t\t// if offsetX/Y are true we center the element to the screen\n\t\tif ( offsetX === true ) {\n\t\t\toffsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\n\t\t}\n\t\tif ( offsetY === true ) {\n\t\t\toffsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\n\t\t}\n\n\t\tpos.left -= offsetX || 0;\n\t\tpos.top  -= offsetY || 0;\n\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n\t\tpos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;\n\n\t\ttime = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;\n\n\t\tthis.scrollTo(pos.left, pos.top, time, easing);\n\t},\n\n\t_transitionTime: function (time) {\n\t\ttime = time || 0;\n\n\t\tthis.scrollerStyle[utils.style.transitionDuration] = time + 'ms';\n\n\t\tif ( !time && utils.isBadAndroid ) {\n\t\t\tthis.scrollerStyle[utils.style.transitionDuration] = '0.001s';\n\t\t}\n\n\n\t\tif ( this.indicators ) {\n\t\t\tfor ( var i = this.indicators.length; i--; ) {\n\t\t\t\tthis.indicators[i].transitionTime(time);\n\t\t\t}\n\t\t}\n\n\n// INSERT POINT: _transitionTime\n\n\t},\n\n\t_transitionTimingFunction: function (easing) {\n\t\tthis.scrollerStyle[utils.style.transitionTimingFunction] = easing;\n\n\n\t\tif ( this.indicators ) {\n\t\t\tfor ( var i = this.indicators.length; i--; ) {\n\t\t\t\tthis.indicators[i].transitionTimingFunction(easing);\n\t\t\t}\n\t\t}\n\n\n// INSERT POINT: _transitionTimingFunction\n\n\t},\n\n\t_translate: function (x, y) {\n\t\tif ( this.options.useTransform ) {\n\n/* REPLACE START: _translate */\n\n\t\t\tthis.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;\n\n/* REPLACE END: _translate */\n\n\t\t} else {\n\t\t\tx = Math.round(x);\n\t\t\ty = Math.round(y);\n\t\t\tthis.scrollerStyle.left = x + 'px';\n\t\t\tthis.scrollerStyle.top = y + 'px';\n\t\t}\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\n\tif ( this.indicators ) {\n\t\tfor ( var i = this.indicators.length; i--; ) {\n\t\t\tthis.indicators[i].updatePosition();\n\t\t}\n\t}\n\n\n// INSERT POINT: _translate\n\n\t},\n\n\t_initEvents: function (remove) {\n\t\tvar eventType = remove ? utils.removeEvent : utils.addEvent,\n\t\t\ttarget = this.options.bindToWrapper ? this.wrapper : window;\n\n\t\teventType(window, 'orientationchange', this);\n\t\teventType(window, 'resize', this);\n\n\t\tif ( this.options.click ) {\n\t\t\teventType(this.wrapper, 'click', this, true);\n\t\t}\n\n\t\tif ( !this.options.disableMouse ) {\n\t\t\teventType(this.wrapper, 'mousedown', this);\n\t\t\teventType(target, 'mousemove', this);\n\t\t\teventType(target, 'mousecancel', this);\n\t\t\teventType(target, 'mouseup', this);\n\t\t}\n\n\t\tif ( utils.hasPointer && !this.options.disablePointer ) {\n\t\t\teventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);\n\t\t\teventType(target, utils.prefixPointerEvent('pointermove'), this);\n\t\t\teventType(target, utils.prefixPointerEvent('pointercancel'), this);\n\t\t\teventType(target, utils.prefixPointerEvent('pointerup'), this);\n\t\t}\n\n\t\tif ( utils.hasTouch && !this.options.disableTouch ) {\n\t\t\teventType(this.wrapper, 'touchstart', this);\n\t\t\teventType(target, 'touchmove', this);\n\t\t\teventType(target, 'touchcancel', this);\n\t\t\teventType(target, 'touchend', this);\n\t\t}\n\n\t\teventType(this.scroller, 'transitionend', this);\n\t\teventType(this.scroller, 'webkitTransitionEnd', this);\n\t\teventType(this.scroller, 'oTransitionEnd', this);\n\t\teventType(this.scroller, 'MSTransitionEnd', this);\n\t},\n\n\tgetComputedPosition: function () {\n\t\tvar matrix = window.getComputedStyle(this.scroller, null),\n\t\t\tx, y;\n\n\t\tif ( this.options.useTransform ) {\n\t\t\tmatrix = matrix[utils.style.transform].split(')')[0].split(', ');\n\t\t\tx = +(matrix[12] || matrix[4]);\n\t\t\ty = +(matrix[13] || matrix[5]);\n\t\t} else {\n\t\t\tx = +matrix.left.replace(/[^-\\d.]/g, '');\n\t\t\ty = +matrix.top.replace(/[^-\\d.]/g, '');\n\t\t}\n\n\t\treturn { x: x, y: y };\n\t},\n\n\t_initIndicators: function () {\n\t\tvar interactive = this.options.interactiveScrollbars,\n\t\t\tcustomStyle = typeof this.options.scrollbars != 'string',\n\t\t\tindicators = [],\n\t\t\tindicator;\n\n\t\tvar that = this;\n\n\t\tthis.indicators = [];\n\n\t\tif ( this.options.scrollbars ) {\n\t\t\t// Vertical scrollbar\n\t\t\tif ( this.options.scrollY ) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: createDefaultScrollbar('v', interactive, this.options.scrollbars),\n\t\t\t\t\tinteractive: interactive,\n\t\t\t\t\tdefaultScrollbars: true,\n\t\t\t\t\tcustomStyle: customStyle,\n\t\t\t\t\tresize: this.options.resizeScrollbars,\n\t\t\t\t\tshrink: this.options.shrinkScrollbars,\n\t\t\t\t\tfade: this.options.fadeScrollbars,\n\t\t\t\t\tlistenX: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\n\t\t\t// Horizontal scrollbar\n\t\t\tif ( this.options.scrollX ) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: createDefaultScrollbar('h', interactive, this.options.scrollbars),\n\t\t\t\t\tinteractive: interactive,\n\t\t\t\t\tdefaultScrollbars: true,\n\t\t\t\t\tcustomStyle: customStyle,\n\t\t\t\t\tresize: this.options.resizeScrollbars,\n\t\t\t\t\tshrink: this.options.shrinkScrollbars,\n\t\t\t\t\tfade: this.options.fadeScrollbars,\n\t\t\t\t\tlistenY: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\t\t}\n\n\t\tif ( this.options.indicators ) {\n\t\t\t// TODO: check concat compatibility\n\t\t\tindicators = indicators.concat(this.options.indicators);\n\t\t}\n\n\t\tfor ( var i = indicators.length; i--; ) {\n\t\t\tthis.indicators.push( new Indicator(this, indicators[i]) );\n\t\t}\n\n\t\t// TODO: check if we can use array.map (wide compatibility and performance issues)\n\t\tfunction _indicatorsMap (fn) {\n\t\t\tfor ( var i = that.indicators.length; i--; ) {\n\t\t\t\tfn.call(that.indicators[i]);\n\t\t\t}\n\t\t}\n\n\t\tif ( this.options.fadeScrollbars ) {\n\t\t\tthis.on('scrollEnd', function () {\n\t\t\t\t_indicatorsMap(function () {\n\t\t\t\t\tthis.fade();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.on('scrollCancel', function () {\n\t\t\t\t_indicatorsMap(function () {\n\t\t\t\t\tthis.fade();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.on('scrollStart', function () {\n\t\t\t\t_indicatorsMap(function () {\n\t\t\t\t\tthis.fade(1);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.on('beforeScrollStart', function () {\n\t\t\t\t_indicatorsMap(function () {\n\t\t\t\t\tthis.fade(1, true);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\n\t\tthis.on('refresh', function () {\n\t\t\t_indicatorsMap(function () {\n\t\t\t\tthis.refresh();\n\t\t\t});\n\t\t});\n\n\t\tthis.on('destroy', function () {\n\t\t\t_indicatorsMap(function () {\n\t\t\t\tthis.destroy();\n\t\t\t});\n\n\t\t\tdelete this.indicators;\n\t\t});\n\t},\n\n\t_initWheel: function () {\n\t\tutils.addEvent(this.wrapper, 'wheel', this);\n\t\tutils.addEvent(this.wrapper, 'mousewheel', this);\n\t\tutils.addEvent(this.wrapper, 'DOMMouseScroll', this);\n\n\t\tthis.on('destroy', function () {\n\t\t\tutils.removeEvent(this.wrapper, 'wheel', this);\n\t\t\tutils.removeEvent(this.wrapper, 'mousewheel', this);\n\t\t\tutils.removeEvent(this.wrapper, 'DOMMouseScroll', this);\n\t\t});\n\t},\n\n\t_wheel: function (e) {\n\t\tif ( !this.enabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tvar wheelDeltaX, wheelDeltaY,\n\t\t\tnewX, newY,\n\t\t\tthat = this;\n\n\t\tif ( this.wheelTimeout === undefined ) {\n\t\t\tthat._execEvent('scrollStart');\n\t\t}\n\n\t\t// Execute the scrollEnd event after 400ms the wheel stopped scrolling\n\t\tclearTimeout(this.wheelTimeout);\n\t\tthis.wheelTimeout = setTimeout(function () {\n\t\t\tthat._execEvent('scrollEnd');\n\t\t\tthat.wheelTimeout = undefined;\n\t\t}, 400);\n\n\t\tif ( 'deltaX' in e ) {\n\t\t\twheelDeltaX = -e.deltaX;\n\t\t\twheelDeltaY = -e.deltaY;\n\t\t} else if ( 'wheelDeltaX' in e ) {\n\t\t\twheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;\n\t\t\twheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;\n\t\t} else if ( 'wheelDelta' in e ) {\n\t\t\twheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;\n\t\t} else if ( 'detail' in e ) {\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\twheelDeltaX *= this.options.invertWheelDirection;\n\t\twheelDeltaY *= this.options.invertWheelDirection;\n\n\t\tif ( !this.hasVerticalScroll ) {\n\t\t\twheelDeltaX = wheelDeltaY;\n\t\t\twheelDeltaY = 0;\n\t\t}\n\n\t\tif ( this.options.snap ) {\n\t\t\tnewX = this.currentPage.pageX;\n\t\t\tnewY = this.currentPage.pageY;\n\n\t\t\tif ( wheelDeltaX > 0 ) {\n\t\t\t\tnewX--;\n\t\t\t} else if ( wheelDeltaX < 0 ) {\n\t\t\t\tnewX++;\n\t\t\t}\n\n\t\t\tif ( wheelDeltaY > 0 ) {\n\t\t\t\tnewY--;\n\t\t\t} else if ( wheelDeltaY < 0 ) {\n\t\t\t\tnewY++;\n\t\t\t}\n\n\t\t\tthis.goToPage(newX, newY);\n\n\t\t\treturn;\n\t\t}\n\n\t\tnewX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n\t\tnewY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n\n\t\tif ( newX > 0 ) {\n\t\t\tnewX = 0;\n\t\t} else if ( newX < this.maxScrollX ) {\n\t\t\tnewX = this.maxScrollX;\n\t\t}\n\n\t\tif ( newY > 0 ) {\n\t\t\tnewY = 0;\n\t\t} else if ( newY < this.maxScrollY ) {\n\t\t\tnewY = this.maxScrollY;\n\t\t}\n\n\t\tthis.scrollTo(newX, newY, 0);\n\n\t\tif ( this.options.probeType > 1 ) {\n\t\t\tthis._execEvent('scroll');\n\t\t}\n\n// INSERT POINT: _wheel\n\t},\n\n\t_initSnap: function () {\n\t\tthis.currentPage = {};\n\n\t\tif ( typeof this.options.snap == 'string' ) {\n\t\t\tthis.options.snap = this.scroller.querySelectorAll(this.options.snap);\n\t\t}\n\n\t\tthis.on('refresh', function () {\n\t\t\tvar i = 0, l,\n\t\t\t\tm = 0, n,\n\t\t\t\tcx, cy,\n\t\t\t\tx = 0, y,\n\t\t\t\tstepX = this.options.snapStepX || this.wrapperWidth,\n\t\t\t\tstepY = this.options.snapStepY || this.wrapperHeight,\n\t\t\t\tel;\n\n\t\t\tthis.pages = [];\n\n\t\t\tif ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.options.snap === true ) {\n\t\t\t\tcx = Math.round( stepX / 2 );\n\t\t\t\tcy = Math.round( stepY / 2 );\n\n\t\t\t\twhile ( x > -this.scrollerWidth ) {\n\t\t\t\t\tthis.pages[i] = [];\n\t\t\t\t\tl = 0;\n\t\t\t\t\ty = 0;\n\n\t\t\t\t\twhile ( y > -this.scrollerHeight ) {\n\t\t\t\t\t\tthis.pages[i][l] = {\n\t\t\t\t\t\t\tx: Math.max(x, this.maxScrollX),\n\t\t\t\t\t\t\ty: Math.max(y, this.maxScrollY),\n\t\t\t\t\t\t\twidth: stepX,\n\t\t\t\t\t\t\theight: stepY,\n\t\t\t\t\t\t\tcx: x - cx,\n\t\t\t\t\t\t\tcy: y - cy\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\ty -= stepY;\n\t\t\t\t\t\tl++;\n\t\t\t\t\t}\n\n\t\t\t\t\tx -= stepX;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tel = this.options.snap;\n\t\t\t\tl = el.length;\n\t\t\t\tn = -1;\n\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\tif ( i === 0 || el[i].offsetLeft <= el[i-1].offsetLeft ) {\n\t\t\t\t\t\tm = 0;\n\t\t\t\t\t\tn++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !this.pages[m] ) {\n\t\t\t\t\t\tthis.pages[m] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tx = Math.max(-el[i].offsetLeft, this.maxScrollX);\n\t\t\t\t\ty = Math.max(-el[i].offsetTop, this.maxScrollY);\n\t\t\t\t\tcx = x - Math.round(el[i].offsetWidth / 2);\n\t\t\t\t\tcy = y - Math.round(el[i].offsetHeight / 2);\n\n\t\t\t\t\tthis.pages[m][n] = {\n\t\t\t\t\t\tx: x,\n\t\t\t\t\t\ty: y,\n\t\t\t\t\t\twidth: el[i].offsetWidth,\n\t\t\t\t\t\theight: el[i].offsetHeight,\n\t\t\t\t\t\tcx: cx,\n\t\t\t\t\t\tcy: cy\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( x > this.maxScrollX ) {\n\t\t\t\t\t\tm++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);\n\n\t\t\t// Update snap threshold if needed\n\t\t\tif ( this.options.snapThreshold % 1 === 0 ) {\n\t\t\t\tthis.snapThresholdX = this.options.snapThreshold;\n\t\t\t\tthis.snapThresholdY = this.options.snapThreshold;\n\t\t\t} else {\n\t\t\t\tthis.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);\n\t\t\t\tthis.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);\n\t\t\t}\n\t\t});\n\n\t\tthis.on('flick', function () {\n\t\t\tvar time = this.options.snapSpeed || Math.max(\n\t\t\t\t\tMath.max(\n\t\t\t\t\t\tMath.min(Math.abs(this.x - this.startX), 1000),\n\t\t\t\t\t\tMath.min(Math.abs(this.y - this.startY), 1000)\n\t\t\t\t\t), 300);\n\n\t\t\tthis.goToPage(\n\t\t\t\tthis.currentPage.pageX + this.directionX,\n\t\t\t\tthis.currentPage.pageY + this.directionY,\n\t\t\t\ttime\n\t\t\t);\n\t\t});\n\t},\n\n\t_nearestSnap: function (x, y) {\n\t\tif ( !this.pages.length ) {\n\t\t\treturn { x: 0, y: 0, pageX: 0, pageY: 0 };\n\t\t}\n\n\t\tvar i = 0,\n\t\t\tl = this.pages.length,\n\t\t\tm = 0;\n\n\t\t// Check if we exceeded the snap threshold\n\t\tif ( Math.abs(x - this.absStartX) < this.snapThresholdX &&\n\t\t\tMath.abs(y - this.absStartY) < this.snapThresholdY ) {\n\t\t\treturn this.currentPage;\n\t\t}\n\n\t\tif ( x > 0 ) {\n\t\t\tx = 0;\n\t\t} else if ( x < this.maxScrollX ) {\n\t\t\tx = this.maxScrollX;\n\t\t}\n\n\t\tif ( y > 0 ) {\n\t\t\ty = 0;\n\t\t} else if ( y < this.maxScrollY ) {\n\t\t\ty = this.maxScrollY;\n\t\t}\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tif ( x >= this.pages[i][0].cx ) {\n\t\t\t\tx = this.pages[i][0].x;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tl = this.pages[i].length;\n\n\t\tfor ( ; m < l; m++ ) {\n\t\t\tif ( y >= this.pages[0][m].cy ) {\n\t\t\t\ty = this.pages[0][m].y;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif ( i == this.currentPage.pageX ) {\n\t\t\ti += this.directionX;\n\n\t\t\tif ( i < 0 ) {\n\t\t\t\ti = 0;\n\t\t\t} else if ( i >= this.pages.length ) {\n\t\t\t\ti = this.pages.length - 1;\n\t\t\t}\n\n\t\t\tx = this.pages[i][0].x;\n\t\t}\n\n\t\tif ( m == this.currentPage.pageY ) {\n\t\t\tm += this.directionY;\n\n\t\t\tif ( m < 0 ) {\n\t\t\t\tm = 0;\n\t\t\t} else if ( m >= this.pages[0].length ) {\n\t\t\t\tm = this.pages[0].length - 1;\n\t\t\t}\n\n\t\t\ty = this.pages[0][m].y;\n\t\t}\n\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y,\n\t\t\tpageX: i,\n\t\t\tpageY: m\n\t\t};\n\t},\n\n\tgoToPage: function (x, y, time, easing) {\n\t\teasing = easing || this.options.bounceEasing;\n\n\t\tif ( x >= this.pages.length ) {\n\t\t\tx = this.pages.length - 1;\n\t\t} else if ( x < 0 ) {\n\t\t\tx = 0;\n\t\t}\n\n\t\tif ( y >= this.pages[x].length ) {\n\t\t\ty = this.pages[x].length - 1;\n\t\t} else if ( y < 0 ) {\n\t\t\ty = 0;\n\t\t}\n\n\t\tvar posX = this.pages[x][y].x,\n\t\t\tposY = this.pages[x][y].y;\n\n\t\ttime = time === undefined ? this.options.snapSpeed || Math.max(\n\t\t\tMath.max(\n\t\t\t\tMath.min(Math.abs(posX - this.x), 1000),\n\t\t\t\tMath.min(Math.abs(posY - this.y), 1000)\n\t\t\t), 300) : time;\n\n\t\tthis.currentPage = {\n\t\t\tx: posX,\n\t\t\ty: posY,\n\t\t\tpageX: x,\n\t\t\tpageY: y\n\t\t};\n\n\t\tthis.scrollTo(posX, posY, time, easing);\n\t},\n\n\tnext: function (time, easing) {\n\t\tvar x = this.currentPage.pageX,\n\t\t\ty = this.currentPage.pageY;\n\n\t\tx++;\n\n\t\tif ( x >= this.pages.length && this.hasVerticalScroll ) {\n\t\t\tx = 0;\n\t\t\ty++;\n\t\t}\n\n\t\tthis.goToPage(x, y, time, easing);\n\t},\n\n\tprev: function (time, easing) {\n\t\tvar x = this.currentPage.pageX,\n\t\t\ty = this.currentPage.pageY;\n\n\t\tx--;\n\n\t\tif ( x < 0 && this.hasVerticalScroll ) {\n\t\t\tx = 0;\n\t\t\ty--;\n\t\t}\n\n\t\tthis.goToPage(x, y, time, easing);\n\t},\n\n\t_initKeys: function (e) {\n\t\t// default key bindings\n\t\tvar keys = {\n\t\t\tpageUp: 33,\n\t\t\tpageDown: 34,\n\t\t\tend: 35,\n\t\t\thome: 36,\n\t\t\tleft: 37,\n\t\t\tup: 38,\n\t\t\tright: 39,\n\t\t\tdown: 40\n\t\t};\n\t\tvar i;\n\n\t\t// if you give me characters I give you keycode\n\t\tif ( typeof this.options.keyBindings == 'object' ) {\n\t\t\tfor ( i in this.options.keyBindings ) {\n\t\t\t\tif ( typeof this.options.keyBindings[i] == 'string' ) {\n\t\t\t\t\tthis.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.options.keyBindings = {};\n\t\t}\n\n\t\tfor ( i in keys ) {\n\t\t\tthis.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];\n\t\t}\n\n\t\tutils.addEvent(window, 'keydown', this);\n\n\t\tthis.on('destroy', function () {\n\t\t\tutils.removeEvent(window, 'keydown', this);\n\t\t});\n\t},\n\n\t_key: function (e) {\n\t\tif ( !this.enabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar snap = this.options.snap,\t// we are using this alot, better to cache it\n\t\t\tnewX = snap ? this.currentPage.pageX : this.x,\n\t\t\tnewY = snap ? this.currentPage.pageY : this.y,\n\t\t\tnow = utils.getTime(),\n\t\t\tprevTime = this.keyTime || 0,\n\t\t\tacceleration = 0.250,\n\t\t\tpos;\n\n\t\tif ( this.options.useTransition && this.isInTransition ) {\n\t\t\tpos = this.getComputedPosition();\n\n\t\t\tthis._translate(Math.round(pos.x), Math.round(pos.y));\n\t\t\tthis.isInTransition = false;\n\t\t}\n\n\t\tthis.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;\n\n\t\tswitch ( e.keyCode ) {\n\t\t\tcase this.options.keyBindings.pageUp:\n\t\t\t\tif ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\n\t\t\t\t\tnewX += snap ? 1 : this.wrapperWidth;\n\t\t\t\t} else {\n\t\t\t\t\tnewY += snap ? 1 : this.wrapperHeight;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.options.keyBindings.pageDown:\n\t\t\t\tif ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\n\t\t\t\t\tnewX -= snap ? 1 : this.wrapperWidth;\n\t\t\t\t} else {\n\t\t\t\t\tnewY -= snap ? 1 : this.wrapperHeight;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.options.keyBindings.end:\n\t\t\t\tnewX = snap ? this.pages.length-1 : this.maxScrollX;\n\t\t\t\tnewY = snap ? this.pages[0].length-1 : this.maxScrollY;\n\t\t\t\tbreak;\n\t\t\tcase this.options.keyBindings.home:\n\t\t\t\tnewX = 0;\n\t\t\t\tnewY = 0;\n\t\t\t\tbreak;\n\t\t\tcase this.options.keyBindings.left:\n\t\t\t\tnewX += snap ? -1 : 5 + this.keyAcceleration>>0;\n\t\t\t\tbreak;\n\t\t\tcase this.options.keyBindings.up:\n\t\t\t\tnewY += snap ? 1 : 5 + this.keyAcceleration>>0;\n\t\t\t\tbreak;\n\t\t\tcase this.options.keyBindings.right:\n\t\t\t\tnewX -= snap ? -1 : 5 + this.keyAcceleration>>0;\n\t\t\t\tbreak;\n\t\t\tcase this.options.keyBindings.down:\n\t\t\t\tnewY -= snap ? 1 : 5 + this.keyAcceleration>>0;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tif ( snap ) {\n\t\t\tthis.goToPage(newX, newY);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( newX > 0 ) {\n\t\t\tnewX = 0;\n\t\t\tthis.keyAcceleration = 0;\n\t\t} else if ( newX < this.maxScrollX ) {\n\t\t\tnewX = this.maxScrollX;\n\t\t\tthis.keyAcceleration = 0;\n\t\t}\n\n\t\tif ( newY > 0 ) {\n\t\t\tnewY = 0;\n\t\t\tthis.keyAcceleration = 0;\n\t\t} else if ( newY < this.maxScrollY ) {\n\t\t\tnewY = this.maxScrollY;\n\t\t\tthis.keyAcceleration = 0;\n\t\t}\n\n\t\tthis.scrollTo(newX, newY, 0);\n\n\t\tthis.keyTime = now;\n\t},\n\n\t_animate: function (destX, destY, duration, easingFn) {\n\t\tvar that = this,\n\t\t\tstartX = this.x,\n\t\t\tstartY = this.y,\n\t\t\tstartTime = utils.getTime(),\n\t\t\tdestTime = startTime + duration;\n\n\t\tfunction step () {\n\t\t\tvar now = utils.getTime(),\n\t\t\t\tnewX, newY,\n\t\t\t\teasing;\n\n\t\t\tif ( now >= destTime ) {\n\t\t\t\tthat.isAnimating = false;\n\t\t\t\tthat._translate(destX, destY);\n\t\t\t\t\n\t\t\t\tif ( !that.resetPosition(that.options.bounceTime) ) {\n\t\t\t\t\tthat._execEvent('scrollEnd');\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnow = ( now - startTime ) / duration;\n\t\t\teasing = easingFn(now);\n\t\t\tnewX = ( destX - startX ) * easing + startX;\n\t\t\tnewY = ( destY - startY ) * easing + startY;\n\t\t\tthat._translate(newX, newY);\n\n\t\t\tif ( that.isAnimating ) {\n\t\t\t\trAF(step);\n\t\t\t}\n\n\t\t\tif ( that.options.probeType == 3 ) {\n\t\t\t\tthat._execEvent('scroll');\n\t\t\t}\n\t\t}\n\n\t\tthis.isAnimating = true;\n\t\tstep();\n\t},\n\n\thandleEvent: function (e) {\n\t\tswitch ( e.type ) {\n\t\t\tcase 'touchstart':\n\t\t\tcase 'pointerdown':\n\t\t\tcase 'MSPointerDown':\n\t\t\tcase 'mousedown':\n\t\t\t\tthis._start(e);\n\t\t\t\tbreak;\n\t\t\tcase 'touchmove':\n\t\t\tcase 'pointermove':\n\t\t\tcase 'MSPointerMove':\n\t\t\tcase 'mousemove':\n\t\t\t\tthis._move(e);\n\t\t\t\tbreak;\n\t\t\tcase 'touchend':\n\t\t\tcase 'pointerup':\n\t\t\tcase 'MSPointerUp':\n\t\t\tcase 'mouseup':\n\t\t\tcase 'touchcancel':\n\t\t\tcase 'pointercancel':\n\t\t\tcase 'MSPointerCancel':\n\t\t\tcase 'mousecancel':\n\t\t\t\tthis._end(e);\n\t\t\t\tbreak;\n\t\t\tcase 'orientationchange':\n\t\t\tcase 'resize':\n\t\t\t\tthis._resize();\n\t\t\t\tbreak;\n\t\t\tcase 'transitionend':\n\t\t\tcase 'webkitTransitionEnd':\n\t\t\tcase 'oTransitionEnd':\n\t\t\tcase 'MSTransitionEnd':\n\t\t\t\tthis._transitionEnd(e);\n\t\t\t\tbreak;\n\t\t\tcase 'wheel':\n\t\t\tcase 'DOMMouseScroll':\n\t\t\tcase 'mousewheel':\n\t\t\t\tthis._wheel(e);\n\t\t\t\tbreak;\n\t\t\tcase 'keydown':\n\t\t\t\tthis._key(e);\n\t\t\t\tbreak;\n\t\t\tcase 'click':\n\t\t\t\tif ( !e._constructed ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n};\nfunction createDefaultScrollbar (direction, interactive, type) {\n\tvar scrollbar = document.createElement('div'),\n\t\tindicator = document.createElement('div');\n\n\tif ( type === true ) {\n\t\tscrollbar.style.cssText = 'position:absolute;z-index:9999';\n\t\tindicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';\n\t}\n\n\tindicator.className = 'iScrollIndicator';\n\n\tif ( direction == 'h' ) {\n\t\tif ( type === true ) {\n\t\t\tscrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n\t\t\tindicator.style.height = '100%';\n\t\t}\n\t\tscrollbar.className = 'iScrollHorizontalScrollbar';\n\t} else {\n\t\tif ( type === true ) {\n\t\t\tscrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n\t\t\tindicator.style.width = '100%';\n\t\t}\n\t\tscrollbar.className = 'iScrollVerticalScrollbar';\n\t}\n\n\tscrollbar.style.cssText += ';overflow:hidden';\n\n\tif ( !interactive ) {\n\t\tscrollbar.style.pointerEvents = 'none';\n\t}\n\n\tscrollbar.appendChild(indicator);\n\n\treturn scrollbar;\n}\n\nfunction Indicator (scroller, options) {\n\tthis.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n\tthis.wrapperStyle = this.wrapper.style;\n\tthis.indicator = this.wrapper.children[0];\n\tthis.indicatorStyle = this.indicator.style;\n\tthis.scroller = scroller;\n\n\tthis.options = {\n\t\tlistenX: true,\n\t\tlistenY: true,\n\t\tinteractive: false,\n\t\tresize: true,\n\t\tdefaultScrollbars: false,\n\t\tshrink: false,\n\t\tfade: false,\n\t\tspeedRatioX: 0,\n\t\tspeedRatioY: 0\n\t};\n\n\tfor ( var i in options ) {\n\t\tthis.options[i] = options[i];\n\t}\n\n\tthis.sizeRatioX = 1;\n\tthis.sizeRatioY = 1;\n\tthis.maxPosX = 0;\n\tthis.maxPosY = 0;\n\n\tif ( this.options.interactive ) {\n\t\tif ( !this.options.disableTouch ) {\n\t\t\tutils.addEvent(this.indicator, 'touchstart', this);\n\t\t\tutils.addEvent(window, 'touchend', this);\n\t\t}\n\t\tif ( !this.options.disablePointer ) {\n\t\t\tutils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n\t\t\tutils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);\n\t\t}\n\t\tif ( !this.options.disableMouse ) {\n\t\t\tutils.addEvent(this.indicator, 'mousedown', this);\n\t\t\tutils.addEvent(window, 'mouseup', this);\n\t\t}\n\t}\n\n\tif ( this.options.fade ) {\n\t\tthis.wrapperStyle[utils.style.transform] = this.scroller.translateZ;\n\t\tthis.wrapperStyle[utils.style.transitionDuration] = utils.isBadAndroid ? '0.001s' : '0ms';\n\t\tthis.wrapperStyle.opacity = '0';\n\t}\n}\n\nIndicator.prototype = {\n\thandleEvent: function (e) {\n\t\tswitch ( e.type ) {\n\t\t\tcase 'touchstart':\n\t\t\tcase 'pointerdown':\n\t\t\tcase 'MSPointerDown':\n\t\t\tcase 'mousedown':\n\t\t\t\tthis._start(e);\n\t\t\t\tbreak;\n\t\t\tcase 'touchmove':\n\t\t\tcase 'pointermove':\n\t\t\tcase 'MSPointerMove':\n\t\t\tcase 'mousemove':\n\t\t\t\tthis._move(e);\n\t\t\t\tbreak;\n\t\t\tcase 'touchend':\n\t\t\tcase 'pointerup':\n\t\t\tcase 'MSPointerUp':\n\t\t\tcase 'mouseup':\n\t\t\tcase 'touchcancel':\n\t\t\tcase 'pointercancel':\n\t\t\tcase 'MSPointerCancel':\n\t\t\tcase 'mousecancel':\n\t\t\t\tthis._end(e);\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\tdestroy: function () {\n\t\tif ( this.options.interactive ) {\n\t\t\tutils.removeEvent(this.indicator, 'touchstart', this);\n\t\t\tutils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n\t\t\tutils.removeEvent(this.indicator, 'mousedown', this);\n\n\t\t\tutils.removeEvent(window, 'touchmove', this);\n\t\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n\t\t\tutils.removeEvent(window, 'mousemove', this);\n\n\t\t\tutils.removeEvent(window, 'touchend', this);\n\t\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);\n\t\t\tutils.removeEvent(window, 'mouseup', this);\n\t\t}\n\n\t\tif ( this.options.defaultScrollbars ) {\n\t\t\tthis.wrapper.parentNode.removeChild(this.wrapper);\n\t\t}\n\t},\n\n\t_start: function (e) {\n\t\tvar point = e.touches ? e.touches[0] : e;\n\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tthis.transitionTime();\n\n\t\tthis.initiated = true;\n\t\tthis.moved = false;\n\t\tthis.lastPointX\t= point.pageX;\n\t\tthis.lastPointY\t= point.pageY;\n\n\t\tthis.startTime\t= utils.getTime();\n\n\t\tif ( !this.options.disableTouch ) {\n\t\t\tutils.addEvent(window, 'touchmove', this);\n\t\t}\n\t\tif ( !this.options.disablePointer ) {\n\t\t\tutils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);\n\t\t}\n\t\tif ( !this.options.disableMouse ) {\n\t\t\tutils.addEvent(window, 'mousemove', this);\n\t\t}\n\n\t\tthis.scroller._execEvent('beforeScrollStart');\n\t},\n\n\t_move: function (e) {\n\t\tvar point = e.touches ? e.touches[0] : e,\n\t\t\tdeltaX, deltaY,\n\t\t\tnewX, newY,\n\t\t\ttimestamp = utils.getTime();\n\n\t\tif ( !this.moved ) {\n\t\t\tthis.scroller._execEvent('scrollStart');\n\t\t}\n\n\t\tthis.moved = true;\n\n\t\tdeltaX = point.pageX - this.lastPointX;\n\t\tthis.lastPointX = point.pageX;\n\n\t\tdeltaY = point.pageY - this.lastPointY;\n\t\tthis.lastPointY = point.pageY;\n\n\t\tnewX = this.x + deltaX;\n\t\tnewY = this.y + deltaY;\n\n\t\tthis._pos(newX, newY);\n\n\n\t\tif ( this.scroller.options.probeType == 1 && timestamp - this.startTime > 300 ) {\n\t\t\tthis.startTime = timestamp;\n\t\t\tthis.scroller._execEvent('scroll');\n\t\t} else if ( this.scroller.options.probeType > 1 ) {\n\t\t\tthis.scroller._execEvent('scroll');\n\t\t}\n\n\n// INSERT POINT: indicator._move\n\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t},\n\n\t_end: function (e) {\n\t\tif ( !this.initiated ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initiated = false;\n\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tutils.removeEvent(window, 'touchmove', this);\n\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n\t\tutils.removeEvent(window, 'mousemove', this);\n\n\t\tif ( this.scroller.options.snap ) {\n\t\t\tvar snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n\t\t\tvar time = this.options.snapSpeed || Math.max(\n\t\t\t\t\tMath.max(\n\t\t\t\t\t\tMath.min(Math.abs(this.scroller.x - snap.x), 1000),\n\t\t\t\t\t\tMath.min(Math.abs(this.scroller.y - snap.y), 1000)\n\t\t\t\t\t), 300);\n\n\t\t\tif ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {\n\t\t\t\tthis.scroller.directionX = 0;\n\t\t\t\tthis.scroller.directionY = 0;\n\t\t\t\tthis.scroller.currentPage = snap;\n\t\t\t\tthis.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);\n\t\t\t}\n\t\t}\n\n\t\tif ( this.moved ) {\n\t\t\tthis.scroller._execEvent('scrollEnd');\n\t\t}\n\t},\n\n\ttransitionTime: function (time) {\n\t\ttime = time || 0;\n\t\tthis.indicatorStyle[utils.style.transitionDuration] = time + 'ms';\n\n\t\tif ( !time && utils.isBadAndroid ) {\n\t\t\tthis.indicatorStyle[utils.style.transitionDuration] = '0.001s';\n\t\t}\n\t},\n\n\ttransitionTimingFunction: function (easing) {\n\t\tthis.indicatorStyle[utils.style.transitionTimingFunction] = easing;\n\t},\n\n\trefresh: function () {\n\t\tthis.transitionTime();\n\n\t\tif ( this.options.listenX && !this.options.listenY ) {\n\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n\t\t} else if ( this.options.listenY && !this.options.listenX ) {\n\t\t\tthis.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t} else {\n\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t}\n\n\t\tif ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {\n\t\t\tutils.addClass(this.wrapper, 'iScrollBothScrollbars');\n\t\t\tutils.removeClass(this.wrapper, 'iScrollLoneScrollbar');\n\n\t\t\tif ( this.options.defaultScrollbars && this.options.customStyle ) {\n\t\t\t\tif ( this.options.listenX ) {\n\t\t\t\t\tthis.wrapper.style.right = '8px';\n\t\t\t\t} else {\n\t\t\t\t\tthis.wrapper.style.bottom = '8px';\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tutils.removeClass(this.wrapper, 'iScrollBothScrollbars');\n\t\t\tutils.addClass(this.wrapper, 'iScrollLoneScrollbar');\n\n\t\t\tif ( this.options.defaultScrollbars && this.options.customStyle ) {\n\t\t\t\tif ( this.options.listenX ) {\n\t\t\t\t\tthis.wrapper.style.right = '2px';\n\t\t\t\t} else {\n\t\t\t\t\tthis.wrapper.style.bottom = '2px';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar r = this.wrapper.offsetHeight;\t// force refresh\n\n\t\tif ( this.options.listenX ) {\n\t\t\tthis.wrapperWidth = this.wrapper.clientWidth;\n\t\t\tif ( this.options.resize ) {\n\t\t\t\tthis.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n\t\t\t\tthis.indicatorStyle.width = this.indicatorWidth + 'px';\n\t\t\t} else {\n\t\t\t\tthis.indicatorWidth = this.indicator.clientWidth;\n\t\t\t}\n\n\t\t\tthis.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n\t\t\tif ( this.options.shrink == 'clip' ) {\n\t\t\t\tthis.minBoundaryX = -this.indicatorWidth + 8;\n\t\t\t\tthis.maxBoundaryX = this.wrapperWidth - 8;\n\t\t\t} else {\n\t\t\t\tthis.minBoundaryX = 0;\n\t\t\t\tthis.maxBoundaryX = this.maxPosX;\n\t\t\t}\n\n\t\t\tthis.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\t\n\t\t}\n\n\t\tif ( this.options.listenY ) {\n\t\t\tthis.wrapperHeight = this.wrapper.clientHeight;\n\t\t\tif ( this.options.resize ) {\n\t\t\t\tthis.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n\t\t\t\tthis.indicatorStyle.height = this.indicatorHeight + 'px';\n\t\t\t} else {\n\t\t\t\tthis.indicatorHeight = this.indicator.clientHeight;\n\t\t\t}\n\n\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n\t\t\tif ( this.options.shrink == 'clip' ) {\n\t\t\t\tthis.minBoundaryY = -this.indicatorHeight + 8;\n\t\t\t\tthis.maxBoundaryY = this.wrapperHeight - 8;\n\t\t\t} else {\n\t\t\t\tthis.minBoundaryY = 0;\n\t\t\t\tthis.maxBoundaryY = this.maxPosY;\n\t\t\t}\n\n\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\t\t\tthis.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\n\t\t}\n\n\t\tthis.updatePosition();\n\t},\n\n\tupdatePosition: function () {\n\t\tvar x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n\t\t\ty = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n\t\tif ( !this.options.ignoreBoundaries ) {\n\t\t\tif ( x < this.minBoundaryX ) {\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\n\t\t\t\t\tthis.width = Math.max(this.indicatorWidth + x, 8);\n\t\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\t}\n\t\t\t\tx = this.minBoundaryX;\n\t\t\t} else if ( x > this.maxBoundaryX ) {\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\n\t\t\t\t\tthis.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n\t\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\t\tx = this.maxPosX + this.indicatorWidth - this.width;\n\t\t\t\t} else {\n\t\t\t\t\tx = this.maxBoundaryX;\n\t\t\t\t}\n\t\t\t} else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {\n\t\t\t\tthis.width = this.indicatorWidth;\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t}\n\n\t\t\tif ( y < this.minBoundaryY ) {\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\n\t\t\t\t\tthis.height = Math.max(this.indicatorHeight + y * 3, 8);\n\t\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\t}\n\t\t\t\ty = this.minBoundaryY;\n\t\t\t} else if ( y > this.maxBoundaryY ) {\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\n\t\t\t\t\tthis.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n\t\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\t\ty = this.maxPosY + this.indicatorHeight - this.height;\n\t\t\t\t} else {\n\t\t\t\t\ty = this.maxBoundaryY;\n\t\t\t\t}\n\t\t\t} else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {\n\t\t\t\tthis.height = this.indicatorHeight;\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t}\n\t\t}\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tif ( this.scroller.options.useTransform ) {\n\t\t\tthis.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;\n\t\t} else {\n\t\t\tthis.indicatorStyle.left = x + 'px';\n\t\t\tthis.indicatorStyle.top = y + 'px';\n\t\t}\n\t},\n\n\t_pos: function (x, y) {\n\t\tif ( x < 0 ) {\n\t\t\tx = 0;\n\t\t} else if ( x > this.maxPosX ) {\n\t\t\tx = this.maxPosX;\n\t\t}\n\n\t\tif ( y < 0 ) {\n\t\t\ty = 0;\n\t\t} else if ( y > this.maxPosY ) {\n\t\t\ty = this.maxPosY;\n\t\t}\n\n\t\tx = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;\n\t\ty = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;\n\n\t\tthis.scroller.scrollTo(x, y);\n\t},\n\n\tfade: function (val, hold) {\n\t\tif ( hold && !this.visible ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout(this.fadeTimeout);\n\t\tthis.fadeTimeout = null;\n\n\t\tvar time = val ? 250 : 500,\n\t\t\tdelay = val ? 0 : 300;\n\n\t\tval = val ? '1' : '0';\n\n\t\tthis.wrapperStyle[utils.style.transitionDuration] = time + 'ms';\n\n\t\tthis.fadeTimeout = setTimeout((function (val) {\n\t\t\tthis.wrapperStyle.opacity = val;\n\t\t\tthis.visible = +val;\n\t\t}).bind(this, val), delay);\n\t}\n};\n\nIScroll.utils = utils;\n\nif ( typeof module != 'undefined' && module.exports ) {\n\tmodule.exports = IScroll;\n} else {\n\twindow.IScroll = IScroll;\n}\n\n})(window, document, Math);"]}]}